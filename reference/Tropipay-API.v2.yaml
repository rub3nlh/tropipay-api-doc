openapi: 3.0.0
info:
  title: TPP API v2.0
  version: '2.0'
  description: Tropipay API V2.0
servers:
  - url: 'https://tropipay-dev.herokuapp.com/api/v2'
    description: Develop
paths:
  '/users/{userId}':
    parameters:
      - schema:
          type: integer
        name: userId
        in: path
        required: true
        description: Id of an existing user.
    get:
      summary: Get User Info Detail
      responses:
        '200':
          description: User Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
              examples:
                Get User Alice Smith:
                  value:
                    id: 142
                    firstName: Alice
                    lastName: Smith
                    email: alice.smith@gmail.com
                    dateOfBirth: '1997-10-31'
                    emailVerified: true
                    signUpDate: '2019-08-24'
        '404':
          description: User Not Found
      operationId: get-users-userId
      description: Retrieve the information of the user with the matching user ID.
      tags:
        - Users
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
    patch:
      summary: Update User Information
      operationId: patch-users-userId
      responses:
        '200':
          description: User Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
              examples:
                Updated User Rebecca Baker:
                  value:
                    id: 13
                    firstName: Rebecca
                    lastName: Baker
                    email: rebecca@gmail.com
                    dateOfBirth: '1985-10-02'
                    emailVerified: false
                    createDate: '2019-08-24'
        '404':
          description: User Not Found
        '409':
          description: Email Already Taken
      description: Update the infromation of an existing user.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                firstName:
                  type: string
                lastName:
                  type: string
                email:
                  type: string
                  description: 'If a new email is given, the user''s email verified property will be set to false.'
                dateOfBirth:
                  type: string
            examples:
              Update First Name:
                value:
                  firstName: Rebecca
              Update Email:
                value:
                  email: rebecca@gmail.com
              Update Last Name & Date of Birth:
                value:
                  lastName: Baker
                  dateOfBirth: '1985-10-02'
        description: Patch user properties to update.
      tags:
        - Users
  /merchant/hooks:
    get:
      summary: Get a list of all events subscribed with Hooks
      tags:
        - Hooks
      responses:
        '200':
          $ref: '#/components/responses/eventList'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: get-api-v2-hook
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      description: |
        Endpoint for getting event hooks list by merchant. 

        ## Event 
        Events are made up of an object with three fundamental properties *(event, target, value)*
        ```json
        {
              "event": "user_signup",
              "target": "email",
              "value": "user@mail.com",
              "createdAt": "2021-02-13T21:30:59.154Z",
              "updatedAt": "2021-02-13T21:30:59.154Z"
        }
        ```

        * **event:** String that represents the name of the event, you must select from the list of available events, otherwise it will not produce an error but it will not be executed. For get full list of available events see endpoint **GET /api/v2/hook/events**.
        * **target:** String representing the type of event supported. It is currently available: 'web' (allows to receive information in a url), 'email' (allows to receive information in an email address). 
        * **value:** String that represents the value depending on the type of selected event determined by the 'target' property, for example if the selected 'target' is email the value would be an email address, likewise if the selected 'target' is 'web' the expected value corresponds to a url that receives information through the HTTP POST method. 
    post:
      summary: Subscribe to new event with a hook
      operationId: post-api-v2-hook
      responses:
        '200':
          $ref: '#/components/responses/EventResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      description: |
        Endpoint allows a merchant to subscribe to an event, specifying the options to receive information at the time it is trigger.

        ## Event 
        Events are made up of an object with three fundamental properties *(event, target, value)*
        ```json
        {
              "event": "user_signup",
              "target": "email",
              "value": "user@mail.com",
              "createdAt": "2021-02-13T21:30:59.154Z",
              "updatedAt": "2021-02-13T21:30:59.154Z"
        }
        ```

        * **event:** String that represents the name of the event, you must select from the list of available events, otherwise it will not produce an error but it will not be executed. For get full list of available events see endpoint **GET /api/v2/hook/events**.
        * **target:** String representing the type of event supported. It is currently available: 'web' (allows to receive information in a url), 'email' (allows to receive information in an email address). 
        * **value:** String that represents the value depending on the type of selected event determined by the 'target' property, for example if the selected 'target' is email the value would be an email address, likewise if the selected 'target' is 'web' the expected value corresponds to a url that receives information through the HTTP POST method. 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
            examples:
              example-1:
                value:
                  event: user_signup
                  target: web
                  value: 'https://www.merchant_domain.com/api/user/signup/listen'
        description: 'Here we have an example of a valid params request:'
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - Hooks
    put:
      summary: Update subscription to an event
      operationId: put-api-v2-hook
      responses:
        '200':
          $ref: '#/components/responses/EventResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      description: |
        Endpoint allows a merchant update event subscription , specifying the options to receive information at the time it is trigger.Take into account the value of the name or denomination of the event cannot be modified, in case it is required to change this field, it is recommended to delete it and create a new subscription.
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
            examples:
              example-1:
                value:
                  event: user_signup
                  target: email
                  value: tonykssa@gmail.com
        description: ''
      tags:
        - Hooks
    delete:
      summary: Delete the subscription to an event
      operationId: delete-api-v2-hook
      responses:
        '200':
          $ref: '#/components/responses/EventResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      description: |
        This Endpoint allows a merchant to unsubscribe from an event by name or denomination.
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                event:
                  type: string
            examples:
              example-1:
                value:
                  event: user_signup
        description: ''
      tags:
        - Hooks
    parameters: []
  /merchant/hooks/events:
    get:
      summary: Get a list with all events that allow a subscription
      responses:
        '200':
          $ref: '#/components/responses/eventListDescription'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: get-api-v2-hook-events
      description: |
        Endpoint for get full list of available events.

        ## Events 
        Events are made up of an object with two fundamental properties *(name, description)*
        ```json
        { 
            name: 'user_signup', 
            description: 'Event launched once an user complete registration on the TropiPay platform.' 
        }
        ```
        + **user_signup:** Event launched once an user complete registration on the TropiPay platform. 
        + **user_login:** Event launched once an user complete login on the TropiPay platform.
        + **user_kyc:** Event launched once an user complete KYC process, indicated in each case the process status. Payload of response:
        ```js
              {
                  userId: String;
                  status: String;
                  event: String;
                  user: Object;
              }
        ```
        + **payment_in_state_change:** The event is fired once a user changes their status payment in entry method.
        + **payment_out_state_change:** The event is fired once a user changes their status payment out entry method.
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - Hooks
    parameters: []
  /access:
    post:
      summary: 'Login Workflow: Obtain login URL'
      operationId: post-api-v2-access
      responses:
        '200':
          description: 'Here we have an example of a valid response:'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessResponse'
              examples:
                example-1:
                  value:
                    url: 'https://www.tropipay.com/m-login/eyJtZXJjaGFudElkIjoxLCJzaWduYXR1cmUiOiJmZmVhZTE2ZDM4MmQ1ZDFjZDlkYjU5NzdmYzcxZmUzYiIsImNvZGUiOjE2MTM3Nzk4NTYxMzgsInJlZGlyZWN0VHlwZSI6IjEiLCJleHRyYUNTUyI6Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuNC4xL2Nzcy9ib290c3RyYXAubWluLmNzcyIsInJlZGlyZWN0VXJsIjoiaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbSJ9'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      description: |
        Endopint that allows obtaining the url of the platform login form. Keep in mind that the login url provides a form that must be rendered inside a container. We recommend using an ```<IFRAME>```. For security reasons the login url will be valid for 30 seconds, after that term it will have to be requested again. 


        ### Request Parameters

        #### **redirectType** 
        The type of request defines the mode in which the login form interacts with its container, it can take one of two possible values: 
           * 1: Redirect the page to a specific address, this being specified in the parameters called *redirectUrl*. 
           * 2: Set communication with the iframe parent container using the *window.addEventListener* and *parent.postMessage messages*.

        #### **extraCSS**
        The login form Look and Feel can be customized by the injection of CSS styles, this property defines the url of the remote css to apply.

        Feel free to explore the source code of the login form. Some of the available CSS Classes are as follows:
        - tpp-container: The parent container of the entire form
        - tpp-input: All form inputs have this class
        - tpp-button-container: Each button is contained in a div with this class
        - tpp-button-next: The NEXT button
        - tpp-input-email: the class for email field all the time
        - tpp-input-email-0: the email field when in step 0 (only email input visible)
        - tpp-input-email-1: the email field when in step 1 (normal login)
        - tpp-input-email-2: the email field when in step 2 (first-time login)
        - tpp-input-email-3: the email field when in step 3 (resetting user password)
        - tpp-input-pass: all password type inputs have this class
        - tpp-input-pass-2: password inputs for first-time login
        - tpp-input-pass-3: password inputs when resetting user password
        - tpp-input-token: the input for typing the secutity token for password reset

        Bellow is an example css stylesheet to render inputs side by side. Use it as a basic example of it's power and be creative ;)

        <!--
        title: "customStyles.css"
        lineNumbers: true
        -->

        ```css
        .tpp-container{
            max-width: 2900px;
        }

        .tpp-input input {
            color: red;
        }

        .tpp-input, .tpp-button-container{
            width: 20%;
            float: left;
            margin-right: 10px;
        }

        .tpp-button-container-3{
            width: 47%;
        }

        .tpp-input-3{
            width: 23%;
        }

        .tpp-input-email-0{
            width: 48%;
        }

        .tpp-button-container{
            margin-top: 1rem !important;
        }

        .tpp-button-container button{
            height: 56px;
        }
        ```

        #### **redirectUrl** 
        Set url to which you want to redirect once the login process has been successfully completed, it depends on the value set in the *redirectType* property.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccessRequest'
            examples:
              example-1:
                value:
                  redirectType: 1
                  extraCSS: 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'
                  redirectUrl: 'https://www.merchant.com/homr'
          application/xml:
            schema:
              type: object
              properties: {}
        description: 'Here we have an example of a valid request:'
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - White Label
    parameters: []
  /countries:
    get:
      summary: Getting Users Countries List
      tags:
        - Countries
      responses:
        '200':
          description: |-
            ```
            {
                "count": 245,
                "rows": [
                    {
                        "id": 44,
                        "name": "Afghanistan",
                        "sepaZone": false,
                        "state": 1,
                        "slug": "AF",
                        "callingCode": 93,
                        "isDestination": false,
                        "createdAt": "2019-09-03T15:22:26.410Z",
                        "updatedAt": "2019-09-03T15:22:26.410Z"
                    },
                    {
                        "id": 43,
                        "name": "Albania",
                        "sepaZone": false,
                        "state": 1,
                        "slug": "AL",
                        "callingCode": 355,
                        "isDestination": false,
                        "createdAt": "2019-09-03T15:22:26.410Z",
                        "updatedAt": "2019-09-03T15:22:26.410Z"
                    },
                    ...
                    {
                        "id": 254,
                        "name": "Zimbabwe",
                        "sepaZone": false,
                        "state": 1,
                        "slug": "ZW",
                        "callingCode": 263,
                        "isDestination": false,
                        "createdAt": "2019-09-03T15:22:26.514Z",
                        "updatedAt": "2019-09-03T15:22:26.514Z"
                    }
                ],
                "limit": 300,
                "offset": 0
            }
            ```
      operationId: get-api-countries
      description: |
        Endpoint that allows obtaining the list of countries. Useful to get country ids required when creating new users (```birthCountryId``` and ```countryDestinationid``` fields of User model)

        <!-- theme: info -->
        >### info
        > when sending birthCountryId and countryDestinationId values, you can use country Slugs >instead of country Ids using [two-letter codes from ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes). 
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
    parameters: []
  /countries/destinations:
    get:
      summary: Getting list of beneficiary countries
      tags:
        - Countries
      responses:
        '200':
          description: |-
            ```
            {
                "count": 48,
                "rows": [
                    {
                        "id": 5,
                        "name": "Alemania",
                        "sepaZone": true,
                        "state": 1,
                        "slug": "DE",
                        "callingCode": 49,
                        "isDestination": true,
                        "createdAt": "2019-05-14T09:37:40.349Z",
                        "updatedAt": "2019-05-14T09:37:40.349Z",
                        "countryPaymentTypes": [
                            {
                                "id": 22,
                                "countryDestinationId": 5,
                                "paymentTypeId": 2,
                                "paymentType": "Depósito",
                                "active": true,
                                "createdAt": "2020-07-31T09:56:59.669Z",
                                "updatedAt": "2020-07-31T09:56:59.669Z"
                            }
                        ]
                    },
                    {
                        "id": 41,
                        "name": "Andorra",
                        "sepaZone": true,
                        "state": 1,
                        "slug": "AD",
                        "callingCode": 376,
                        "isDestination": true,
                        "createdAt": "2019-09-03T15:22:26.411Z",
                        "updatedAt": "2019-10-18T10:21:13.673Z",
                        "countryPaymentTypes": [
                            {
                                "id": 30,
                                "countryDestinationId": 41,
                                "paymentTypeId": 2,
                                "paymentType": "Depósito",
                                "active": true,
                                "createdAt": "2020-07-31T09:57:20.913Z",
                                "updatedAt": "2020-07-31T09:57:20.913Z"
                            }
                        ]
                    },
                    ...
                    {
                        "id": 31,
                        "name": "Uruguay",
                        "sepaZone": false,
                        "state": 1,
                        "slug": "UY",
                        "callingCode": 598,
                        "isDestination": true,
                        "createdAt": "2019-07-24T10:22:09.286Z",
                        "updatedAt": "2019-07-24T10:22:09.286Z",
                        "countryPaymentTypes": [
                            {
                                "id": 9,
                                "countryDestinationId": 31,
                                "paymentTypeId": 2,
                                "paymentType": "Depósito",
                                "active": true,
                                "createdAt": "2020-07-31T09:56:38.686Z",
                                "updatedAt": "2020-07-31T09:56:38.686Z"
                            }
                        ]
                    }
                ],
                "limit": 300,
                "offset": 0
            }
            ```
      operationId: get-api-countries-destinations
      description: Endpoint that allows obtaining the list of valid countries to send funds to. Useful when adding new beneficiaries to some user.
    parameters: []
  /occupations:
    get:
      summary: Get Occupations List
      tags:
        - Occupations
      responses:
        '200':
          description: 'Here we have an example of a valid response:'
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  count:
                    type: number
                  rows:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - id
                        - name
                        - code
                        - active
                        - createdAt
                        - updatedAt
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                          minLength: 1
                        description: {}
                        code:
                          type: string
                          minLength: 1
                        active:
                          type: boolean
                        createdAt:
                          type: string
                          minLength: 1
                        updatedAt:
                          type: string
                          minLength: 1
                  limit:
                    type: number
                  offset:
                    type: number
                required:
                  - count
                  - rows
                  - limit
                  - offset
              examples:
                example-1:
                  value:
                    count: 29
                    rows:
                      - id: 15
                        name: Administrativo/a
                        description: null
                        code: '15'
                        active: true
                        createdAt: '2019-09-03T15:22:26.228Z'
                        updatedAt: '2019-09-03T15:22:26.228Z'
                      - id: 4
                        name: Agricultura
                        description: null
                        code: '2'
                        active: true
                        createdAt: '2019-09-03T15:22:26.218Z'
                        updatedAt: '2019-09-03T15:22:26.218Z'
                      - id: 28
                        name: Transportista
                        description: null
                        code: '29'
                        active: true
                        createdAt: '2019-09-03T15:22:26.236Z'
                        updatedAt: '2019-09-03T15:22:26.236Z'
                    limit: 100
                    offset: 0
      operationId: get-api-occupations
      description: Endpoint that allows obtaining the list of occupations
  /access/signup:
    post:
      summary: 'SignUp workflow step 2: Register user data'
      operationId: post-access-signup
      responses:
        '200':
          description: |-
            {
                "user": "66291db0-77a2-11eb-a197-a1853f6310fa"
            }
      description: This endpoint allows you to add a new user to the system
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                clientTypeId:
                  type: number
                email:
                  type: string
                  minLength: 1
                password:
                  type: string
                t_c_version:
                  type: string
                  minLength: 1
                state:
                  type: number
                kycLevel: {}
                name:
                  type: string
                  minLength: 1
                surname:
                  type: string
                  minLength: 1
                birthDate:
                  type: string
                  minLength: 1
                occupationId:
                  type: number
                otherOccupationDetail:
                  type: string
                  minLength: 1
                isPublicOffice:
                  type: boolean
                birthCountryId:
                  type:
                    - string
                    - number
                documentId:
                  type: string
                  minLength: 1
                lang:
                  type: string
                  minLength: 1
                groupId:
                  type: number
                address:
                  type: string
                  minLength: 1
                countryDestinationId:
                  type:
                    - string
                    - number
                city:
                  type: string
                  minLength: 1
                province:
                  type: string
                  minLength: 1
                postalCode:
                  type: string
                  minLength: 1
                phone:
                  type: string
                  minLength: 1
                callingCode:
                  type: string
                  minLength: 1
                validationCode:
                  type: string
                  minLength: 1
                  description: A verification code sent before to user. See /access/send_email_code
              required:
                - clientTypeId
                - email
                - password
                - t_c_version
                - state
                - name
                - surname
                - birthDate
                - occupationId
                - otherOccupationDetail
                - isPublicOffice
                - birthCountryId
                - documentId
                - lang
                - groupId
                - address
                - countryDestinationId
                - city
                - province
                - postalCode
                - phone
                - callingCode
                - validationCode
        description: |-
          To create a new user in the system, you have to make a POST with all mandatory fields.
          <!-- theme: warning -->
          >### warning
          >Before doing this request make sure to verify user email address by [sending email code]( 
          >/reference/Tropipay-API.v2.yaml/paths/~1access~1send_email_code/post)
          >to get validationToken
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - White label
    parameters: []
  /access/send_email_code:
    parameters: []
    post:
      summary: 'SignUp workflow step 1: Send Email Validation Code to user'
      operationId: post-access-sendEmailCode
      responses:
        '200':
          description: This response indicates an email has been sent to the specified email
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  response:
                    type: string
              examples:
                Example:
                  value:
                    message: Security Code Sent
                    response: OK
        '400':
          $ref: '#/components/responses/ErrorResponse'
      description: |-
        This is the very first step in order to subscribe a new user, this allows you to validate user email. Upon successful POST an email will be sent to the specified address with a time-limited token.

        Later, when making the signup POST, this token will be the required parameter ```validationCode``` 
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: The email to verify
                name:
                  type: string
                  description: User Name to show in email
                lang:
                  type: string
                  description: The email body language
              required:
                - email
            examples:
              example-1:
                value:
                  email: john@doe.com
        description: ''
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - White Label
  /access/send_phone_code:
    post:
      summary: 'SignUp workflow step 3: Send Phone Validation Code to user'
      operationId: post-access-sendPhoneCode
      responses:
        '200':
          description: OK
      description: 'Once the User has been registered, his phone number should be verified. In order to accomplish this, a secret code should be sent to user phone through this endpoint. Note that the received code by SMS will be required in order to validate the user phone number in [step 4](Tropipay-API.v2.yaml/paths/~1access~1validate_phone)'
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                callingCode:
                  type: string
                  minLength: 1
                  description: The corresponding country phone code
                phone:
                  type: string
                  minLength: 1
                  description: The phone number tu send SMS to
                lang:
                  type: string
                  minLength: 1
                  description: The message language
              required:
                - callingCode
                - phone
                - lang
      tags:
        - White Label
    parameters: []
  /deposit_accounts:
    get:
      summary: Get Deposit Accounts List
      tags:
        - DepositAccounts
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  count:
                    type: number
                  rows:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        accountNumber:
                          type: string
                          minLength: 1
                        alias:
                          type: string
                          minLength: 1
                        swift:
                          type: string
                          minLength: 1
                          description: SWIFT code of destination account. Ignored when beneficiaryType == 1
                        type:
                          type: number
                        country: {}
                        firstName:
                          type: string
                          minLength: 1
                          description: Beneficiary Name. Ignored when beneficiaryType == 1
                        default: {}
                        state:
                          type: number
                        userId:
                          type: string
                          minLength: 1
                        countryDestinationId:
                          type: number
                        lastName:
                          type: string
                          minLength: 1
                          description: Beneficiary LastName. Ignored when beneficiaryType == 1
                        documentNumber:
                          type: string
                          minLength: 1
                        userRelationTypeId:
                          type: number
                        city:
                          type: string
                          minLength: 1
                        postalCode:
                          type: number
                        address:
                          type: string
                          minLength: 1
                        phone:
                          type: string
                          minLength: 1
                        checked:
                          type: boolean
                        province:
                          type: string
                          minLength: 1
                        beneficiaryType:
                          type: number
                        relatedUserId: {}
                        currency:
                          type: string
                          minLength: 1
                        correspondent: {}
                        location: {}
                        office: {}
                        officeValue: {}
                        paymentType:
                          type: number
                        paymentEntityBeneficiaryId:
                          type: number
                        paymentEntityAccountId:
                          type: number
                        verified: {}
                        documentTypeId: {}
                        documentExpirationDate: {}
                        createdAt:
                          type: string
                          minLength: 1
                        updatedAt:
                          type: string
                          minLength: 1
                      required:
                        - id
                        - accountNumber
                        - alias
                        - type
                        - state
                        - userId
                        - countryDestinationId
                        - documentNumber
                        - userRelationTypeId
                        - city
                        - postalCode
                        - address
                        - phone
                        - checked
                        - province
                        - beneficiaryType
                        - currency
                        - paymentType
                        - paymentEntityBeneficiaryId
                        - paymentEntityAccountId
                        - createdAt
                        - updatedAt
                required:
                  - count
                  - rows
              examples:
                example:
                  value:
                    count: 2
                    rows:
                      - id: 45461
                        accountNumber: 9111 1234 5678 9012
                        alias: Joe Account
                        swift: BSOBUSHHXXX
                        type: 3
                        country: null
                        firstName: John
                        default: null
                        state: 1
                        userId: b168e810-e0bb-11ea-8b91-bc41f597fbe4
                        countryDestinationId: 1
                        lastName: Doe
                        documentNumber: '831108111111'
                        userRelationTypeId: 4
                        city: Barcelona
                        postalCode: 11300
                        address: '110, Some Street'
                        phone: '+3412341245'
                        checked: true
                        province: Cataluña
                        beneficiaryType: 2
                        relatedUserId: null
                        currency: USD
                        correspondent: null
                        location: null
                        office: null
                        officeValue: null
                        paymentType: 2
                        paymentEntityBeneficiaryId: 11111
                        paymentEntityAccountId: 22222
                        verified: null
                        documentTypeId: null
                        documentExpirationDate: null
                        createdAt: '2020-11-27T02:43:47.108Z'
                        updatedAt: '2021-02-11T22:41:32.518Z'
                      - id: 49021
                        accountNumber: Jane.doe@gmail.com
                        alias: Jane Tropipay
                        swift: null
                        type: 9
                        country: null
                        firstName: Jane
                        default: null
                        state: 0
                        userId: b168e810-e0bb-11ea-8b91-bd37f597fb67
                        countryDestinationId: 1
                        lastName: Doe
                        documentNumber: null
                        userRelationTypeId: 4
                        city: La Habana
                        postalCode: 11300
                        address: 'Calle 41 #112 e/1ra y 3ra, Miramar, Playa'
                        phone: '+5351234567'
                        checked: true
                        province: La Habana
                        beneficiaryType: 1
                        relatedUserId: 17e9f790-492c-11eb-9c96-bfb9401b8daa
                        currency: null
                        correspondent: null
                        location: null
                        office: null
                        officeValue: null
                        paymentType: 99
                        paymentEntityBeneficiaryId: null
                        paymentEntityAccountId: null
                        verified: null
                        documentTypeId: null
                        documentExpirationDate: null
                        createdAt: '2020-12-28T16:50:52.235Z'
                        updatedAt: '2020-12-28T16:50:52.235Z'
      operationId: get-depositaccounts
      description: 'Returns the list of beneficiaries (depositAccounts) of logged user. Beneficiaries can be active (status: 0) or inactive (status: 1) '
      parameters:
        - in: unknown
        - $ref: '#/components/parameters/User-Authorization-Token'
    post:
      summary: Create a new Deposit Account
      operationId: post-depositaccounts
      responses:
        '200':
          $ref: '#/components/responses/depositAccount'
      description: Adds a new beneficiary to the user account.
      parameters:
        - in: unknown
        - $ref: '#/components/parameters/User-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                beneficiaryType:
                  type: number
                  description: |-
                    1: Another Tropipay user  
                    2: External bank account
                searchBy:
                  type: number
                  description: 'Required when beneficiaryType === 1. Possible values are: 1: search user by email. 2: search user by phone number'
                searchValue:
                  type: string
                  description: the email to look for among tropipay users when beneficiaryType is 1 (INTERNAL)
                accountNumber:
                  type: string
                  minLength: 1
                  description: 'for other Tropipay users, this will be user email or phone.'
                alias:
                  type: string
                  minLength: 1
                swift:
                  type: string
                  minLength: 1
                type:
                  type: number
                  description: Type of account
                firstName:
                  type: string
                  minLength: 1
                lastName:
                  type: string
                  minLength: 1
                secondLastName:
                  type: string
                  minLength: 1
                  description: 'For cuban beneficiaries, second surname is mandatory'
                countryDestinationId:
                  type: number
                  description: See list of countryDestinations for details
                city:
                  type: string
                  minLength: 1
                postalCode:
                  type: number
                address:
                  type: string
                  minLength: 1
                documentNumber:
                  type: string
                  minLength: 1
                phone:
                  type: string
                  minLength: 1
                province:
                  type: string
                  minLength: 1
                userRelationTypeId:
                  type: number
                paymentType:
                  type: string
                documentTypeId:
                  type: number
                documentExpirationDate:
                  type: string
              required:
                - beneficiaryType
                - alias
                - userRelationTypeId
            examples:
              Other Tropipay User:
                value:
                  searchValue: someuser@email.com
                  alias: My Friend in Tropipay
                  userRelationTypeId: 3
                  beneficiaryType: 1
                  searchBy: 1
              External Account:
                value:
                  accountNumber: 9225 9598 7777 8888
                  alias: Mi first Beneficiary
                  swift: BCXXMXMMXXX
                  type: 3
                  firstName: David
                  countryDestinationId: 0
                  lastName: Hunt
                  secondLastName: Jhonson
                  documentNumber: '84848484844'
                  userRelationTypeId: 15
                  city: Carsen City
                  postalCode: '573000'
                  address: '2540 Waterfall Street, SunFlower'
                  phone: '+341234567856'
                  province: Hamtoms
                  beneficiaryType: 2
                  paymentType: '2'
                  documentTypeId: 1
                  documentExpirationDate: '2030-05-01'
        description: |
          The parameters to pass depend on the type of beneficiary you are creating. Beneficiaries can be:
          - Internal: another Tropipay user account. This will allow you to send balance to another Tropipay account
          - External: some external bank account. This will allow you to send money to someone's bank account
      tags:
        - DepositAccounts
    parameters: []
  '/deposit_accounts/:id':
    get:
      summary: Get Deposit Account Detail
      tags:
        - DepositAccounts
      responses:
        '200':
          $ref: '#/components/responses/depositAccount'
      operationId: 'get-depositaccounts-:id'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      description: This returns details of a specific Deposit Account (beneficiary) specified by its ID
    put:
      summary: Update a Deposit Account
      operationId: 'put-depositaccounts-:id'
      responses:
        '200':
          $ref: '#/components/responses/depositAccount'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - DepositAccounts
      description: |
        Updates certain beneficiary data.
    delete:
      summary: Delete a Deposit Account
      operationId: 'delete-depositaccounts-:id'
      responses:
        '200':
          $ref: '#/components/responses/depositAccount'
      description: Deletes the beneficiary indicated by id
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - DepositAccounts
    parameters: []
  /access/validate_phone:
    post:
      summary: 'SignUp workflow step 4: Validate user Phone number'
      operationId: post-access-validatePhone
      responses:
        '200':
          description: OK
      description: 'This allows to validate some user phone number through a secret code previously sent to user by SMS. See [Step 3: SendPhoneCode](Tropipay-API.v2.yaml/paths/~1access~1send_phone_code) for details on how to send validation codes'
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - White Label
    parameters: []
  /merchant/kyc:
    post:
      summary: Get a Link for an User KYC
      operationId: post-kyc
      responses:
        '200':
          $ref: '#/components/responses/kycResponse'
        '400':
          $ref: '#/components/responses/ErrorResponse'
      description: This endpoint is for generating KYC wizard link. The received url must be embeded in an *iframe* in order for the user to follow the KYC verification.
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - Users
    parameters: []
  /merchant/settings:
    get:
      summary: Obtaining list of settings
      responses:
        '200':
          $ref: '#/components/responses/MerchantSettingList'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: configure
      description: Endpoint that allows obtaining the list of merchant settings.
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - White Label
    parameters: []
  /settings/price:
    get:
      summary: Obtaining Prices
      responses:
        '200':
          description: Here we have an example of a valid response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantSetting'
              examples:
                example-1:
                  value:
                    key: publicPrice
                    value: '2.5'
                    section: public
                    state: '1'
                    createdAt: '2021-03-18T20:10:37.670Z'
                    updatedAt: '2021-03-18T20:10:37.670Z'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: get-configure-price
      description: |
        Endpoint that allows obtaining the public price.
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      tags:
        - White Label
    post:
      summary: Setting the public price
      operationId: post-configure-price
      responses:
        '200':
          description: Here we have an example of a valid response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantSetting'
              examples:
                example-1:
                  value:
                    key: publicPrice
                    value: '2.5'
                    section: public
                    state: '1'
                    createdAt: '2021-03-18T20:10:37.670Z'
                    updatedAt: '2021-03-18T20:10:37.670Z'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      description: |
        Endpoint that allows to set the public price.
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                publicPrice:
                  type: string
                  minLength: 1
              required:
                - publicPrice
            examples:
              example-1:
                value:
                  publicPrice: '2.5'
        description: Here we have an example of a valid request
      tags:
        - Settings
    parameters: []
  /movements/in/charge_ota_card:
    post:
      summary: Create a new OTA Virtual Card Charge
      operationId: post-movements-in-charge
      responses:
        '200':
          description: 'Here we have an example of a valid response: '
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  isInternal:
                    type: boolean
                  riskFlag:
                    type: number
                  riskScore:
                    type: number
                  id:
                    type: number
                  reference: {}
                  bankOrderCode:
                    type: string
                    minLength: 1
                  provider: {}
                  userId:
                    type: string
                    minLength: 1
                  bookingDate: {}
                  days:
                    type: number
                  amount:
                    type: number
                  currency: {}
                  originalCurrencyAmount:
                    type: string
                    minLength: 1
                  destinationAmount:
                    type: number
                  destinationCurrency: {}
                  conversionRate:
                    type: number
                  providerFee:
                    type: number
                  ourFee:
                    type: number
                  serviceId:
                    type: number
                  payProviderFee:
                    type: boolean
                  state:
                    type: number
                  movementTypeId:
                    type: number
                  ip: {}
                  updatedAt:
                    type: string
                    minLength: 1
                  createdAt:
                    type: string
                    minLength: 1
                  depositaccountId: {}
                  tmpDestinationAmount:
                    type: number
                  realBankFee: {}
                  paymentcardId: {}
                  expirationDate: {}
                  balanceBefore: {}
                  balanceAfter: {}
                  agent:
                    type: string
                    minLength: 1
                  transactionId: {}
                  paymentEntityStatus:
                    type: number
                  paymentEntityBalance: {}
                  errorReason: {}
                  reasonId: {}
                  reasonDes: {}
                  paymentUrl:
                    type: object
                    properties:
                      chargeUrl:
                        type: string
                        minLength: 1
                    required:
                      - chargeUrl
                required:
                  - isInternal
                  - riskFlag
                  - riskScore
                  - id
                  - bankOrderCode
                  - userId
                  - days
                  - amount
                  - originalCurrencyAmount
                  - destinationAmount
                  - conversionRate
                  - providerFee
                  - ourFee
                  - serviceId
                  - payProviderFee
                  - state
                  - movementTypeId
                  - updatedAt
                  - createdAt
                  - tmpDestinationAmount
                  - agent
                  - paymentEntityStatus
                  - paymentUrl
              examples:
                example-1:
                  value:
                    isInternal: false
                    riskFlag: 0
                    riskScore: 0
                    id: 327790
                    reference: null
                    bankOrderCode: '626382735590'
                    provider: null
                    userId: e2931920-e402a30d78-a7-4qqq
                    bookingDate: null
                    days: 0
                    amount: 19500
                    currency: null
                    originalCurrencyAmount: '19500'
                    destinationAmount: 17940
                    destinationCurrency: null
                    conversionRate: 1
                    providerFee: 300
                    ourFee: 500
                    serviceId: 1
                    payProviderFee: false
                    state: 1
                    movementTypeId: 2
                    ip: null
                    updatedAt: '2021-03-26T14:22:20.939Z'
                    createdAt: '2021-03-26T14:21:25.400Z'
                    depositaccountId: null
                    tmpDestinationAmount: 0
                    realBankFee: null
                    paymentcardId: null
                    expirationDate: null
                    balanceBefore: null
                    balanceAfter: null
                    agent: TROPIPAY
                    transactionId: null
                    paymentEntityStatus: 99
                    paymentEntityBalance: null
                    errorReason: null
                    reasonId: null
                    reasonDes: null
                    paymentUrl:
                      chargeUrl: 'https://wwwtropipay.com/eyJwYXJhbXMiOiJleUpFVTE5TlJWSkRTRUZPVkY5QlRVOVZUbFFpT2pFNU5UQXdMQ0pFVTE5TlJWSkRTRUZPVkY5UFVrUkZVaUk2SWpZeU5qTTRNamN6TlRVNU1DSXNJa1JUWDAxRlVrTklRVTVVWDAxRlVrTklRVTVVUTA5RVJTSTZJakV5TkRRek9UY3hNaUlzSWtSVFgwMUZVa05JUVU1VVgwTlZVbEpGVGtOWklqb2lPVGM0SWl3aVJGTmZUVVZTUTBoQlRsUmZWRkpCVGxOQlExUkpUMDVVV1ZCRklqb3dMQ0pFVTE5TlJWSkRTRUZPVkY5TlJWSkRTRUZPVkZWU1RDSTZJbWgwZEhBNkx5OXNiMk5oYkdodmMzUTZNekF3TUM5aGNHa3ZZMkZzYkdKaFkyc3ZjbVZrYzNseklpd2lSRk5mVFVWU1EwaEJUbFJmVlZKTVQwc2lPaUpvZEhSd09pOHZiRzlqWVd4b2IzTjBPak13TURBdlkyaGhjbWRsWDA5TElpd2lSRk5mVFVWU1EwaEJUbFJmVlZKTVMwOGlPaUpvZEhSd09pOHZiRzlqWVd4b2IzTjBPak13TURBdlkyaGhjbWRsWDB0UEluMD0iLCJzaWduYXR1cmUiOiJrS3prbEtGRGlsT05odGEwYk1HSU8yME9RTm5LSWh2VXZIdkJ6SWxQRTc0PSIsInJlZHN5c1VybCI6Imh0dHBzOi8vc2lzLXQucmVkc3lzLmVzOjI1NDQzL3Npcy9yZWFsaXphclBhZ28ifQ=='
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                reference:
                  type: string
                  minLength: 1
                provider:
                  type: number
                bookingDate:
                  type: string
                  minLength: 1
                currency:
                  type: string
                  minLength: 1
                reasonId:
                  type: string
                reasonDes:
                  type: string
                destinationCurrency:
                  type: string
                  minLength: 1
                originalCurrencyAmount:
                  type: number
              required:
                - reference
                - provider
                - bookingDate
                - currency
                - reasonId
                - reasonDes
                - destinationCurrency
                - originalCurrencyAmount
            examples:
              example-1:
                value:
                  reference: TE5NN77
                  provider: 1
                  providerName: ''
                  bookingDate: '2021-03-24'
                  amount: 19500
                  amountToShow: ''
                  agree: true
                  amountToCharge: ''
                  depositaccountId: ''
                  destinationAccount: ''
                  currency: EUR
                  widgetUrl: null
                  rate: 1.1
                  error: false
                  paymentCardLoaded: false
                  verifyClose: false
                  loading: false
                  accounts: []
                  countries:
                    - id: 44
                      name: Afghanistan
                      sepaZone: false
                      state: 1
                      slug: AF
                      callingCode: 93
                      isDestination: false
                      createdAt: '2019-09-03T15:22:26.410Z'
                      updatedAt: '2019-09-03T15:22:26.410Z'
                    - id: 254
                      name: Zimbabwe
                      sepaZone: false
                      state: 1
                      slug: ZW
                      callingCode: 263
                      isDestination: false
                      createdAt: '2019-09-03T15:22:26.514Z'
                      updatedAt: '2019-09-03T15:22:26.514Z'
                  redsysData: null
                  services:
                    - id: 1
                      name: Charge OTA Cards
                      slug: CHARGE_OTA_CARDS
                      service_fee_percent: 300
                      service_fee_fixed: 0
                      tp_fee_percent: 500
                      tp_fee_fixed: 0
                      type: PAYMENT
                      order: 1
                      createdAt: '2019-10-29T12:12:07.133Z'
                      updatedAt: '2019-10-29T12:12:07.133Z'
                      permissions: []
                      disabled: false
                    - id: 5
                      name: External TopUp
                      slug: EXTERNAL_TOPUP
                      service_fee_percent: 0
                      service_fee_fixed: 0
                      tp_fee_percent: 300
                      tp_fee_fixed: 0
                      type: PAYMENT
                      order: 6
                      createdAt: '2020-01-08T11:16:12.292Z'
                      updatedAt: '2020-01-08T15:17:23.151Z'
                      permissions: []
                      disabled: false
                  service:
                    id: 1
                    name: Charge OTA Cards
                    slug: CHARGE_OTA_CARDS
                    service_fee_percent: 300
                    service_fee_fixed: 0
                    tp_fee_percent: 500
                    tp_fee_fixed: 0
                    type: PAYMENT
                    order: 1
                    createdAt: '2019-10-29T12:12:07.133Z'
                    updatedAt: '2019-10-29T12:12:07.133Z'
                    permissions: []
                    disabled: false
                  concept: ''
                  description: ''
                  reasons:
                    - id: 1
                      name: Arreglo de vivienda
                      description: null
                      active: true
                      createdAt: '2021-01-21T03:50:17.227Z'
                      updatedAt: '2021-01-21T03:50:17.227Z'
                    - id: 11
                      name: Turismo
                      description: null
                      active: true
                      createdAt: '2021-01-21T03:50:17.227Z'
                      updatedAt: '2021-01-21T03:50:17.227Z'
                  singleUse: false
                  showPaymentGenerated: false
                  sendSMS: false
                  sendEmail: false
                  smsTo: ''
                  notifyEmail: ''
                  step: 2
                  reasonId: ''
                  reasonDes: ''
                  message: null
                  showMessage: false
                  cardObj: null
                  user:
                    id: e2931920-e402-11ea-a30d-83c978a74aaa
                    name: 'Antonio '
                    surname: Membrides Espinosa
                    company: null
                    email: tonykssa@gmail.com
                    phone: '+5359996545'
                    address: 'reparto Pueblo Griffo, edificio 55, 12 plantas, apto 1101'
                    walletId: '2195'
                    t_c_version: /terms/v0.0
                    role: user
                    nationality: null
                    state: 1
                    balance: 205000
                    birthDate: '1985-10-31T00:00:00.000Z'
                    countryDestinationId: 0
                    city: Cienfuegos
                    postalCode: '55504'
                    kycLevel: 4
                    occupationId: 30
                    clientTypeId: 1
                    isPublicOffice: false
                    birthCountryId: 0
                    province: Cienfuegos
                    groupId: 1
                    lastLogin: '2021-03-25T21:36:09.207Z'
                    pendingIn: 0
                    pendingOut: 0
                    lang: es
                    shortId: 00Y2
                    documentTypeId: 5
                    documentExpirationDate: '2021-04-02T00:00:00.000Z'
                    contracts: null
                    liveProof: true
                    needMigration: false
                    twoFaType: 1
                    twoFaMode: 1
                    otherOccupationDetail: Loco
                    merchantId: 1
                    errorPaymentEntityId: null
                    errorWalletId: null
                    verified: null
                    createdAt: '2020-08-21T23:06:03.059Z'
                    updatedAt: '2021-03-25T21:36:09.209Z'
                    group:
                      id: 1
                      name: KYC3_FULL_ALLOW
                      createdAt: '2019-10-29T12:19:30.340Z'
                      updatedAt: '2020-06-04T14:09:10.754Z'
                      permissions:
                        - id: 1
                          name: ALLOW_EXTERNAL_CHARGE
                          label: payments
                          createdAt: '2019-10-29T12:19:50.939Z'
                          updatedAt: '2019-10-29T12:19:50.939Z'
                          GroupPermission:
                            createdAt: '2019-10-29T12:20:04.555Z'
                            updatedAt: '2019-10-29T12:20:04.555Z'
                            groupId: 1
                            permissionId: 1
                        - id: 18
                          name: ALLOW_PAYMENT_OUT
                          label: generic
                          createdAt: '2020-05-19T08:28:40.660Z'
                          updatedAt: '2020-05-19T08:28:40.660Z'
                          GroupPermission:
                            createdAt: '2020-05-19T08:34:04.850Z'
                            updatedAt: '2020-05-19T08:34:04.850Z'
                            groupId: 1
                            permissionId: 18
                        - id: 19
                          name: ALLOW_MARKET_PURCHASES
                          label: generic
                          createdAt: '2020-05-19T08:28:40.660Z'
                          updatedAt: '2020-05-19T08:28:40.660Z'
                          GroupPermission:
                            createdAt: '2020-05-19T08:34:13.683Z'
                            updatedAt: '2020-05-19T08:34:13.683Z'
                            groupId: 1
                            permissionId: 19
                        - id: 17
                          name: ALLOW_PAYMENT_IN
                          label: generic
                          createdAt: '2020-05-19T08:28:40.660Z'
                          updatedAt: '2020-05-19T08:28:40.660Z'
                          GroupPermission:
                            createdAt: '2020-12-23T21:24:16.683Z'
                            updatedAt: '2020-12-23T21:24:16.683Z'
                            groupId: 1
                            permissionId: 17
                    operation: true
                  callingCode: ''
                  phone: ''
                  expirationDays: 1
                  lang: es
                  urlSuccess: ''
                  urlFailed: ''
                  urlNotification: ''
                  expirationDate: ''
                  serviceDate: ''
                  errorCode: ''
                  voucherCode: ''
                  voucher: null
                  scrollToTop: false
                  amountToSend: ''
                  currencyToSend: BTC
                  amountToReceive: ''
                  currencyToReceive: EUR
                  cryptoPayment: null
                  cryptoPaymentState: null
                  cryptoPaymentExpirationDate: null
                  cryptoRate: null
                  criteria: null
                  days: ''
                  destinationAmount: 17940
                  destinationCurrency: EUR
                  originalCurrencyAmount: 19500
                  conversionRate: 1
        description: 'Here we have an example of a valid request: '
      description: |
        ### Charge an OTA Card:
        Create a charge Url for an OTA Virtual Credit Card.

        You Must send to ***soporte@tropipay.com*** an URL for receiving the Callback with the operation response.

        > Note:  We are working on Webhooks structures to avoid this send URL configuration step. 

        ### How to complete the charge:
        With the response you will receive the **chargeUrl** parameter with the form to add the data card and complete the payment.  
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Movements
    parameters: []
  /movements/in/paylink:
    post:
      summary: Create a new PayLink Charge
      operationId: post-movements-in-paylink
      responses:
        '200':
          description: 'This is an example of a valid response: '
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  id:
                    type: string
                    minLength: 1
                  reference:
                    type: string
                    minLength: 1
                  concept:
                    type: string
                    minLength: 1
                  description:
                    type: string
                    minLength: 1
                  amount:
                    type: number
                  currency:
                    type: string
                    minLength: 1
                  singleUse:
                    type: boolean
                  reasonId:
                    type: number
                  reasonDes:
                    type: string
                  expirationDays:
                    type: number
                  userId:
                    type: string
                    minLength: 1
                  lang:
                    type: string
                    minLength: 1
                  state:
                    type: number
                  urlSuccess:
                    type: string
                  urlFailed:
                    type: string
                  urlNotification:
                    type: string
                  expirationDate:
                    type: string
                    minLength: 1
                  serviceDate: {}
                  hasClient:
                    type: boolean
                  updatedAt:
                    type: string
                    minLength: 1
                  createdAt:
                    type: string
                    minLength: 1
                  qrImage:
                    type: string
                    minLength: 1
                  shortUrl:
                    type: string
                    minLength: 1
                  paymentUrl: {}
                required:
                  - id
                  - reference
                  - concept
                  - description
                  - amount
                  - currency
                  - singleUse
                  - reasonId
                  - reasonDes
                  - expirationDays
                  - userId
                  - lang
                  - state
                  - urlSuccess
                  - urlFailed
                  - urlNotification
                  - expirationDate
                  - hasClient
                  - updatedAt
                  - createdAt
                  - qrImage
                  - shortUrl
              examples:
                example-1:
                  value:
                    id: 5a5cdfb0-8d9d-11eb-bfee-1922dac72c62
                    reference: demo23232323
                    concept: some product id
                    description: some product description
                    amount: 11500
                    currency: EUR
                    singleUse: true
                    reasonId: 4
                    reasonDes: ''
                    expirationDays: 0
                    userId: e2931920-e402-11ea-a30d-83c978a74aaa
                    lang: es
                    state: 1
                    urlSuccess: ''
                    urlFailed: ''
                    urlNotification: ''
                    expirationDate: '2021-03-31T00:00:00.000Z'
                    serviceDate: null
                    hasClient: false
                    updatedAt: '2021-03-25T19:07:33.083Z'
                    createdAt: '2021-03-25T19:07:33.035Z'
                    qrImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAAAklEQVR4AewaftIAAAdcSURBVO3BQW4sy7LgQDKg/W+ZfYY+SiBRJfV98d3M/mGtSxzWushhrYsc1rrIYa2LHNa6yGGtixzWushhrYsc1rrIYa2LHNa6yGGtixzWushhrYsc1rrIDx9S+UsVb6j8poonKlPFpDJVPFGZKj6hMlVMKn+p4hOHtS5yWOsih7Uu8sOXVXyTyicqJpWpYlKZKiaVSWWqeKIyVTxRmSomlaniiconKr5J5ZsOa13ksNZFDmtd5IdfpvJGxRsqn1CZKiaVqeKNikllUnlD5b9E5Y2K33RY6yKHtS5yWOsiP1yuYlKZKp5UvKEyVbxRMalMFZPKpPKkYlK5yWGtixzWushhrYv88H9MxRsqTyqmik+oTBWTypOK/8sOa13ksNZFDmtd5IdfVvGXKiaVqWJSmSreUJkqJpWpYlJ5ojJVPFGZKiaVb6r4LzmsdZHDWhc5rHWRH75M5WYVk8o3VUwqT1SmikllqphU3lD5LzusdZHDWhc5rHWRHz5U8V9W8U0qb1S8oTJVPKl4UvGJiv8lh7UucljrIoe1LvLDh1Smiknlmyqmir9U8YbKVDFVPFF5UjGpPKmYKp6ofFPFbzqsdZHDWhc5rHUR+4cPqDyp+CaVb6qYVKaKSeVJxW9SeaPim1SmijdUpopvOqx1kcNaFzmsdZEfPlQxqTxRmSomlU9UfKJiUpkqfpPKk4pJZap4ojJVTCqfUHlDZar4xGGtixzWushhrYv88MtUPlExqUwVk8qTiknlScUTlaniicpU8YbKGypTxRsVT1SmijdUvumw1kUOa13ksNZF7B++SOUTFZPKVPFE5Y2KSeVJxaTypOITKlPFpPKJiknl/6eKTxzWushhrYsc1rrIDx9SeaNiUnlS8URlqphUpopJ5RMVk8qk8omKSWWqeKIyVUwqTyomlaniv+Sw1kUOa13ksNZFfvhlFW+oPKl4o2JSmSreUHmj4g2VJxVPVJ6oTBWTyqTyROVJxaTypOITh7UucljrIoe1LvLDH1OZKiaVqWJSmSqeqEwVk8onKiaVSeVJxROVJxVTxScqJpU3Kp5UTCrfdFjrIoe1LnJY6yI/fFnFpPJEZaqYVJ6oTBVTxZOKSWWqmFQmlaniDZWpYlJ5Q+WNit+k8pcOa13ksNZFDmtdxP7hF6l8ouKJypOKN1Smikllqnii8qTiDZUnFW+oTBWfUJkqJpWp4psOa13ksNZFDmtdxP7hAypPKt5QeVLxCZUnFZPKGxXfpDJVfELlExVPVD5R8YnDWhc5rHWRw1oX+eGXqUwVk8qTikllqnij4onKVDGpTBVvqHyTylTxTRWTylTxpOKJyjcd1rrIYa2LHNa6iP3DB1Q+UTGpPKl4Q2WqmFSmiknlScWkMlU8UZkqJpX/kopJZaqYVKaK33RY6yKHtS5yWOsi9g8XUXlS8U0qU8UTlTcqJpWp4hMqTyreUJkq/tJhrYsc1rrIYa2L/PAhlTcqJpU3Kp5UTCqTyhsVk8obKlPFpDJVPKl4Q+VJxaTyROUTKk8qPnFY6yKHtS5yWOsiP3yoYlKZKp5UTCpTxaTypOKNit9U8YbKJyreUHmi8kbFGxXfdFjrIoe1LnJY6yI/fEjlEypTxaQyVUwqk8qTim+qeKLyRsUnVN6oeKIyVUwqT1SmikllqvjEYa2LHNa6yGGti9g/fEBlqphUporfpDJVTCpvVEwqTyqeqEwVT1TeqHhD5UnFpDJVTCpTxV86rHWRw1oXOax1kR/+mMqTikllqphUvqniScUTlScVk8pU8aTiEypvqEwVn1B5UvGJw1oXOax1kcNaF/nhl1V8ouJJxROVqWJS+YTKVPFEZaqYVKaKJypTxaTypGJSmSqeqHyi4psOa13ksNZFDmtdxP7hAypTxTepvFHxl1SeVHxCZaqYVP6XVPymw1oXOax1kcNaF7F/+B+m8kbFpPJGxROVqWJSmSomlaliUpkqnqhMFZPKVPGGypOKv3RY6yKHtS5yWOsiP3xI5S9VTBWTylQxqUwVT1QmlU9UTCpTxaQyVUwqU8U3qUwVTyomlTcqPnFY6yKHtS5yWOsiP3xZxTepPFGZKj6h8qRiUnmiMlVMFZPKE5Wp4jdVvKEyVUwqv+mw1kUOa13ksNZFfvhlKm9U/CWVqeITFU9Upoqp4onKE5WpYlJ5ovKJiknlLx3WushhrYsc1rrID5dR+U0qU8UTlScqn1D5popJZaqYVN6omFS+6bDWRQ5rXeSw1kV+uEzFE5WpYlJ5Q2WqmCreUHlS8YmKSeVJxZOKJxWTym86rHWRw1oXOax1kR9+WcVvqphUpoonKlPFE5Wp4onKk4rfpDJVvKEyVUwqTyqmiknlmw5rXeSw1kUOa13khy9T+Usqn6h4ovKGypOKSWWqmFQmlTcqJpWpYlL5RMWk8pcOa13ksNZFDmtdxP5hrUsc1rrIYa2LHNa6yGGtixzWushhrYsc1rrIYa2LHNa6yGGtixzWushhrYsc1rrIYa2LHNa6yP8Dr+q9lKnTBy8AAAAASUVORK5CYII='
                    shortUrl: 'https://www.tropipay.com/money-request/5a5cdfb0-8d9d-11eb-bfee-1922dac72c62'
                    paymentUrl: null
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                reference:
                  type: string
                  minLength: 1
                concept:
                  type: string
                  minLength: 1
                description:
                  type: string
                  minLength: 1
                amount:
                  type: number
                currency:
                  type: string
                  minLength: 1
                singleUse:
                  type: boolean
                reasonId:
                  type: number
                reasonDes:
                  type: string
                expirationDays:
                  type: number
                userId:
                  type: string
                  minLength: 1
                lang:
                  type: string
                  minLength: 1
                urlSuccess:
                  type: string
                urlFailed:
                  type: string
                urlNotification:
                  type: string
                expirationDate:
                  type: string
                  minLength: 1
                serviceDate:
                  type: string
              required:
                - reference
                - concept
                - description
                - amount
                - currency
                - singleUse
                - reasonId
                - reasonDes
                - expirationDays
                - userId
                - lang
                - urlSuccess
                - urlFailed
                - urlNotification
                - expirationDate
                - serviceDate
            examples:
              Example:
                value:
                  reference: demo23232323
                  concept: some product id
                  description: some product description
                  amount: 11500
                  currency: EUR
                  singleUse: true
                  reasonId: 4
                  reasonDes: ''
                  expirationDays: 1
                  userId: e2931920-e402-11ea-a30d-83c978a74aaa
                  lang: es
                  urlSuccess: ''
                  urlFailed: ''
                  urlNotification: ''
                  expirationDate: '2021-03-31'
                  serviceDate: ''
        description: 'Here we have an example of a valid request: '
      description: |-
        This endpoint allows you to generate a payment link. This allows you to make a deposit from people who do not belong to the TropiPay platform in a very simple way, share your payment links and manage your charges. 

        <!-- theme: warning -->
        >#### info
        > This endpoint is deprecated. instead you can use [this endpoint](/reference/Tropipay-API.v2.yaml/paths/~1paymentcards/post)
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Movements
      deprecated: true
  /movements/in/charge_user_card:
    post:
      summary: ''
      operationId: post-movements-in-charge_user_card
      responses:
        '200':
          description: 'Here we have an example of a valid response:'
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  id:
                    type: number
                  reference:
                    type: string
                    minLength: 1
                  bankOrderCode:
                    type: string
                    minLength: 1
                  provider:
                    type: number
                  userId:
                    type: string
                    minLength: 1
                  bookingDate:
                    type: string
                    minLength: 1
                  amount:
                    type: number
                  currency:
                    type: string
                    minLength: 1
                  originalCurrencyAmount:
                    type: number
                  destinationAmount:
                    type: number
                  destinationCurrency:
                    type: string
                    minLength: 1
                  conversionRate:
                    type: number
                  state:
                    type: number
                  serviceId:
                    type: number
                  movementTypeId:
                    type: number
                  updatedAt:
                    type: string
                    minLength: 1
                  createdAt:
                    type: string
                    minLength: 1
                  paymentUrl:
                    type: object
                    properties:
                      chargeUrl:
                        type: string
                        minLength: 1
                    required:
                      - chargeUrl
                required:
                  - id
                  - reference
                  - bankOrderCode
                  - provider
                  - userId
                  - bookingDate
                  - amount
                  - currency
                  - originalCurrencyAmount
                  - destinationAmount
                  - destinationCurrency
                  - conversionRate
                  - state
                  - serviceId
                  - movementTypeId
                  - updatedAt
                  - createdAt
                  - paymentUrl
              examples:
                Ex Charge URL created:
                  value:
                    id: 29964
                    reference: referencia001
                    bankOrderCode: k5ijdex8
                    provider: 1
                    userId: c01af560-c7f4-11e8-849a-1196b4225e29
                    bookingDate: '2020-01-16T00:00:00.000Z'
                    amount: 9012
                    currency: USD
                    originalCurrencyAmount: 10055
                    destinationAmount: 8291
                    destinationCurrency: EUR
                    conversionRate: 1.1157
                    state: 1
                    serviceId: 1
                    movementTypeId: 2
                    updatedAt: '2020-01-17T19:08:43.353Z'
                    createdAt: '2020-01-17T19:08:43.340Z'
                    paymentUrl:
                      chargeUrl: 'https://booking.charge.url/213oieoi2132'
      description: This gives the url to get the bank form to charge the user personal debit or credit cards
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Movements
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                reference:
                  type: string
                  minLength: 1
                provider:
                  type: number
                bookingDate:
                  type: string
                  minLength: 1
                originalCurrencyAmount:
                  type: number
                currency:
                  type: string
                  minLength: 1
                lang:
                  type: string
                  minLength: 1
                agree:
                  type: boolean
                customUrlOK:
                  type: string
                  minLength: 1
                customUrlKO:
                  type: string
                  minLength: 1
              required:
                - reference
                - provider
                - bookingDate
                - originalCurrencyAmount
                - currency
                - lang
                - agree
                - customUrlOK
                - customUrlKO
            examples:
              example-1:
                value:
                  reference: referencia001
                  provider: 1
                  bookingDate: '2020-01-16'
                  originalCurrencyAmount: 10055
                  currency: USD
                  lang: es
                  agree: true
                  customUrlOK: 'https://google.com'
                  customUrlKO: 'https://yahoo.es'
        description: 'Here we have an example of a valid request:'
      x-internal: true
  /merchant/settings/get_prices:
    get:
      summary: Getting Operation costs
      responses:
        '200':
          description: 'Here we have an example of a valid response: '
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  rate:
                    type: number
                  viability: {}
                  prices:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - agent
                        - agentId
                        - subAgentId
                        - path
                        - paymentType
                        - toSend
                        - toGet
                        - rate
                        - fee
                        - bankFee
                        - destinationCurrency
                        - toGetEUR
                      properties:
                        agent:
                          type: string
                          minLength: 1
                        agentId:
                          type: string
                          minLength: 1
                        subAgentId:
                          type: string
                          minLength: 1
                        path:
                          type: string
                          minLength: 1
                        paymentType:
                          type: number
                        toSend:
                          type: string
                          minLength: 1
                        toGet:
                          type: number
                        rate:
                          type: string
                          minLength: 1
                        fee:
                          type: number
                        bankFee:
                          type: number
                        destinationCurrency:
                          type: string
                          minLength: 1
                        toGetEUR:
                          type: number
                required:
                  - rate
                  - prices
              examples:
                example-1:
                  value:
                    rate: 1.1997
                    viability: null
                    prices:
                      - agent: TROPIPAY
                        path: BANK DEPOSIT
                        paymentType: 2
                        toSend: 83668
                        toGet: 94900
                        rate: '1.1348'
                        fee: 5015
                        bankFee: 1865
                        destinationCurrency: USD
                        toGetEUR: 83668
                        cuc: 94900
                      - agent: T - FINCIMEX - TARJETA AIS
                        agentId: T070
                        subAgentId: '2'
                        path: TARJETA AIS
                        paymentType: 4
                        toSend: '100000'
                        toGet: 95200
                        rate: '0.9520'
                        fee: 3832
                        bankFee: 600
                        destinationCurrency: CUC
                        toGetEUR: 79652
                      - agent: T - FINCIMEX - TARJETA AIS USD
                        agentId: T070
                        subAgentId: '5'
                        path: TARJETA AIS
                        paymentType: 4
                        toSend: '100000'
                        toGet: 94900
                        rate: '0.9490'
                        fee: 4202
                        bankFee: 900
                        destinationCurrency: USD
                        toGetEUR: 79401
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: get-merchant-settings-get_prices
      parameters:
        - $ref: '#/components/parameters/Merchant-Authorization-Token'
        - schema:
            type: string
          in: query
          name: country
          description: Destination Country
          required: true
        - schema:
            type: string
          in: query
          name: amountToSend
          description: The amount to send in cents
          required: true
        - schema:
            type: string
          in: query
          name: currencyToSend
          description: The currency to send
          required: true
      description: 'This allows you to fetch costs according to the destination country, amount and currency to send. It is useful to build an online calculator to show costs to clients'
      tags:
        - White Label
  /movements/out/send_validation_code:
    parameters: []
    post:
      summary: ''
      operationId: post-movements-out-send_validation_code
      responses:
        '200':
          $ref: '#/components/responses/SecurityCodeSent'
        '404':
          $ref: '#/components/responses/ErrorResponse'
      description: 'Every time a customer tries to transfer some money out, there is a mandatory validation parameter that needs to be set. When user account is configured to send 2FA through SMS, this endpoint will make the system send that code to user phone in order to confirm operation.'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Movements
  /movements:
    get:
      summary: Get User Movements List
      tags:
        - Movements
      responses:
        '200':
          $ref: '#/components/responses/MovementList'
      operationId: get-movements
      description: This returns a list of user movements with their details
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
  '/movements/:id':
    get:
      summary: Get User Movement Detail
      tags:
        - Movements
      responses:
        '200':
          $ref: '#/components/responses/Movement'
      operationId: 'get-movements-:id'
      description: Fetch all data of a specific movement by its ID
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
  /movements/in/remittance:
    post:
      summary: Sending a Remittance from your personal cards
      operationId: post-movements-in-remittance
      responses:
        '200':
          description: OK
      description: 'When making a remittance, customers can opt to two options: extract and send money from their personal debit or credit cards or using their own balance. This endpoint is used to send money that will be extracted from customer''s personal card. It will respond with information related to the charge movement including an url to open the POST form to execute the extraction from customer card.'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                originalCurrencyAmount:
                  type: number
                country:
                  type: number
                paymentType:
                  type: number
                location:
                  type: string
                  minLength: 1
                amountToReceive:
                  type: number
                currencyToReceive:
                  type: string
                  minLength: 1
                currencyToSend:
                  type: string
                  minLength: 1
                amountToSend:
                  type: number
                agent:
                  type: string
                  minLength: 1
                beneficiaryId:
                  type: number
                reasonId:
                  type: number
                reasonDes:
                  type: string
                  minLength: 1
              required:
                - originalCurrencyAmount
                - country
                - paymentType
                - location
                - amountToReceive
                - currencyToReceive
                - currencyToSend
                - amountToSend
                - agent
                - beneficiaryId
                - reasonId
                - reasonDes
              x-examples:
                example-1:
                  originalCurrencyAmount: 0
                  country: 0
                  paymentType: 0
                  location: string
                  amountToReceive: 0
                  currencyToReceive: string
                  currencyToSend: string
                  amountToSend: 0
                  agent: string
                  beneficiaryId: 0
                  reasonId: 0
                  reasonDes: string
            examples:
              example-1:
                value:
                  originalCurrencyAmount: 135
                  amountToSend: 130
                  amountToReceive: 100
                  currencyToReceive: USD
                  currencyToSend: USD
                  country: 0
                  paymentType: 2
                  location: Cuba
                  agent: agent
                  beneficiaryId: 58598
                  reasonId: 1
                  reasonDes: Descripcion about remittance
      tags:
        - Movements
        - Movements-in
      x-internal: true
  /movements/in/with_tpp_url:
    post:
      summary: Getting the Pay-with-Tropipay URL
      operationId: post-movements-in-with_tpp_url
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  url:
                    type: string
                    minLength: 1
                required:
                  - url
                x-examples:
                  example-1:
                    url: 'http://localhost:3000/external-payment/with-tpp/eyJyZWZlcmVuY2UiOiJTUDAwMDUyMSIsImNvbmNlcHQiOiJjb21wcmEgZGUgcGFuZWxlcyIsImRlc2NyaXB0aW9uIjoibW9kZWxvIEFsaUJhYmEgMSIsImFtb3VudCI6MTAwMCwiY3VycmVuY3kiOiJVU0QiLCJyZWFzb25JZCI6MSwibGFuZyI6ImVzIiwidXJsU3VjZXNzIjoiaHR0cDovL3N1Y2Nlc3MubWVyY2hhbnQuY29tIiwidXJsRmFpbGVkIjoiaHR0cDovL2ZhaWxlZC5tZXJjaGFudC5jb20iLCJ1cmxOb3RpZmljYXRpb24iOiJodHRwOi8vaG9vay5tZXJjaGFudC5jb20iLCJ1c2VyIjp7ImlkIjoiYjE2OGU4MTAtZTBiYi0xMWVhLThiOTEtYmQzN2Y1OTdmYjY3IiwiZW1haWwiOiJzZXJndWl0dXNAZ21haWwuY29tIiwiaWF0IjoxNjIxMTkxMzI2LCJleHAiOjE2MjEyNzc3MjZ9LCJtZXJjaGFudE5hbWUiOiJTRVJHSU8gREFOSUVMIiwibWVyY2hhbnRBY2NvdW50Ijoic2VyZ3VpdHVzQGdtYWlsLmNvbSJ9'
              examples:
                Successful Response:
                  value:
                    url: 'http://tpp-develop.herokuapp.com/external-payment/with-tpp/eyJyZWZlcmVuY2UiOiJTUDAwMDUyMSIsImNvbmNlcHQiOiJjb21wcmEgZGUgcGFuZWxlcyIsImRlc2NyaXB0aW9uIjoibW9kZWxvIEFsaUJhYmEgMSIsImFtb3VudCI6MTAwMCwiY3VycmVuY3kiOiJVU0QiLCJyZWFzb25JZCI6MSwibGFuZyI6ImVzIiwidXJsU3VjZXNzIjoiaHR0cDovL3N1Y2Nlc3MubWVyY2hhbnQuY29tIiwidXJsRmFpbGVkIjoiaHR0cDovL2ZhaWxlZC5tZXJjaGFudC5jb20iLCJ1cmxOb3RpZmljYXRpb24iOiJodHRwOi8vaG9vay5tZXJjaGFudC5jb20iLCJ1c2VyIjp7ImlkIjoiYjE2OGU4MTAtZTBiYi0xMWVhLThiOTEtYmQzN2Y1OTdmYjY3IiwiZW1haWwiOiJzZXJndWl0dXNAZ21haWwuY29tIiwiaWF0IjoxNjIxMTkxMzI2LCJleHAiOjE2MjEyNzc3MjZ9LCJtZXJjaGFudE5hbWUiOiJTRVJHSU8gREFOSUVMIiwibWVyY2hhbnRBY2NvdW50Ijoic2VyZ3VpdHVzQGdtYWlsLmNvbSJ9'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      description: 'This endpoint gives the URL to be set as `href` parameter in your `Pay-with-Tropipay button`. This will allow you to set a new payment method for your users to use. Accessing that url, your customers will access their account at Tropipay.com, verify and confirm payment and return to your site. '
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              x-examples:
                example-1:
                  reference: SP000521
                  concept: compra de paneles
                  description: modelo AliBaba 1
                  amount: 1000
                  currency: USD
                  reasonId: 1
                  lang: es
                  urlSuccess: 'http://success.merchant.com'
                  urlFailed: 'http://failed.merchant.com'
                  urlNotification: 'http://hook.merchant.com'
              properties:
                reference:
                  type: string
                  minLength: 1
                  description: the reference of your product in your shop
                concept:
                  type: string
                  minLength: 1
                  description: a payment concept to show to your customer
                description:
                  type: string
                  minLength: 1
                  description: A description of the product been bought
                amount:
                  type: number
                  description: 'the amount IN CENTS to pay by the buyer '
                currency:
                  type: string
                  minLength: 1
                  description: ''
                reasonId:
                  type: number
                  description: The reason Id for the transaction. See Reasons section
                lang:
                  type: string
                  minLength: 1
                urlSuccess:
                  type: string
                  minLength: 1
                  description: The URL to redirect after successful transaction
                urlFailed:
                  type: string
                  minLength: 1
                  description: The URL to redirect user on Failed transaction
                urlNotification:
                  type: string
                  minLength: 1
                  description: The URL to send a callBack to your server
              required:
                - reference
                - concept
                - description
                - amount
                - currency
                - lang
                - urlSuccess
                - urlFailed
                - urlNotification
            examples:
              'generating a Pay With Tropipay Url ':
                value:
                  reference: SP000521
                  concept: Cakes and Coffee
                  description: Only the best products
                  amount: 1500
                  currency: USD
                  lang: es
                  urlSuccess: 'http://e-commers.com/success'
                  urlFailed: 'http://http://e-commers.com/failed'
                  urlNotification: 'https://e-commers.com/callback_notification'
        description: ''
      tags:
        - Movements
        - Movements-in
  /movements/get_rate:
    post:
      summary: Get Rate
      tags:
        - Movements
      responses:
        '200':
          description: 'Currently returns rate [currencyFrom]-EUR'
          content:
            application/json:
              schema:
                description: ''
                type: object
                x-examples:
                  example-1:
                    rate: 0.8597713008339781
                properties:
                  rate:
                    type: number
              examples:
                USD-EUR:
                  value:
                    rate: 0.8597713008339781
        '400':
          description: currently only 'EUR' is accepted as 'currencyTo' parameter
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        minLength: 1
                      message:
                        type: string
                        minLength: 1
                    required:
                      - code
                      - message
                required:
                  - error
                x-examples:
                  example-1:
                    error:
                      code: unsupported currencyTo
                      message: B_007
              examples:
                Invalid CurrencyTo:
                  value:
                    error:
                      code: unsupported currencyTo
                      message: B_007
      operationId: post-movements-getRate
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      description: Obtain current Tropipay conversion rate. For example USD to EUR
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              x-examples:
                example-1:
                  currencyFrom: USD
                  currencyTo: EUR
              properties:
                currencyFrom:
                  type: string
                  minLength: 1
                  description: The currency to convert from
                currencyTo:
                  type: string
                  minLength: 1
                  description: Optional. Right now it will only accept value 'EUR'. Exchange to other currencies is not yet supported
              required:
                - currencyFrom
            examples:
              USD-EUR:
                value:
                  currencyFrom: USD
                  currencyTo: EUR
        description: ''
    parameters: []
  /movements/download:
    post:
      summary: Download list of movements
      operationId: post-movements-download
      responses:
        '200':
          description: OK
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              x-examples:
                example-1:
                  criteria: salario
                  dateFrom: '2021-01-05 02:00'
                  dateTo: '2021-04-03 09:00'
              properties:
                criteria:
                  type: string
                  minLength: 1
                dateFrom:
                  type: string
                  minLength: 1
                dateTo:
                  type: string
                  minLength: 1
        description: |
          To filter the list of movements to download, you can use three different optional fields:
          - filter by text contained in the reference  of the movement
          - Initial Date to fetch movements from that date on
          - End Date to fetch movements up to that date
          All combinations are allowed. (you can filter using one, two or all fields)
      description: 'This endpoint schedules sending an email to the email address of the user with a CSV list of the movements according to the specified filters. '
      tags:
        - Movements
  /credential:
    get:
      summary: List Credentials
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                description: ''
                type: object
                x-examples:
                  example-1:
                    status: OK
                    data: []
                properties:
                  status:
                    type: string
                    minLength: 1
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Credential'
                required:
                  - status
                  - data
              examples:
                Example:
                  value:
                    status: OK
                    data:
                      - type: 1
                        name: my.demo.1
                        username: 991aea6a4587040942b8599a6d8fbebb
                        password: de78a9592729c63a5abe1447255e1429
                        public: '1629119418585'
                        prefix: Bearer
                        domain: .*tropipay.com.* www.demo.cu
                        status: 2
                        expiration: '2021-08-20T13:10:18.771Z'
                        refresh: 1d
                        redirect: 'https://my.web.app/oauth'
                        groupId: 42
                        ownerId: e2931920-e402-11ea-a30d-83c978a74aaa
                        createdAt: '2021-08-16T13:10:18.771Z'
                        updatedAt: '2021-08-16T13:10:18.771Z'
                        group:
                          id: 42
                          name: my.demo.1
                          createdAt: '2021-08-16T13:10:18.595Z'
                          updatedAt: '2021-08-16T13:10:18.595Z'
                          permissions:
                            - id: 1
                              name: ALLOW_EXTERNAL_CHARGE
                              label: payments
                              createdAt: '2019-10-29T12:19:50.939Z'
                              updatedAt: '2019-10-29T12:19:50.939Z'
                            - id: 2
                              name: BLOCKED_MONEY_OUT
                              label: payments
                              createdAt: '2020-05-18T07:29:48.990Z'
                              updatedAt: '2020-05-18T07:29:48.990Z'
                      - type: 1
                        name: my.demo.2
                        username: 991aea6a4587040942b8599a6d8fbebb
                        password: de78a9592729c63a5abe1447255e1429
                        public: '1629119418585'
                        prefix: Bearer
                        domain: .*tropipay.com.* www.demo.cu
                        status: 2
                        expiration: null
                        refresh: 1d
                        redirect: 'https://my.web.app/oauth'
                        groupId: 42
                        ownerId: e2931920-e402-11ea-a30d-83c978a74aaa
                        createdAt: '2021-08-16T13:10:18.771Z'
                        updatedAt: '2021-08-16T13:10:18.771Z'
                        group:
                          id: 42
                          name: my.demo.2
                          createdAt: '2021-08-16T13:10:18.595Z'
                          updatedAt: '2021-08-16T13:10:18.595Z'
                          permissions:
                            - id: 1
                              name: ALLOW_EXTERNAL_CHARGE
                              label: payments
                              createdAt: '2019-10-29T12:19:50.939Z'
                              updatedAt: '2019-10-29T12:19:50.939Z'
        '400':
          $ref: '#/components/responses/OauthBadRequestResponse'
        '401':
          $ref: '#/components/responses/FailedAuthenticateResponse'
      operationId: get-credential
      description: |-
        This endpoint returns a list credentials assigned to user. 

        There are different types of credentials:
        - **Base:** By default, users have a base credential made up of the user and password pair, from here the permissions are inherited for the rest of the user's credentials.
        - **MFA:** For Two Factor Authentication or Multi Factor Authentication in general.
        - **ApiKey:** An application programming interface key (API key) is a unique identifier used to authenticate a user, developer, or calling program to an API. However, they are typically used to authenticate a project with the API rather than a human user. Different platforms may implement and use API keys in different ways.   
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Access & Credentials
    post:
      summary: Create Credential
      operationId: post-credential
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Credential'
              examples:
                Example:
                  value:
                    client_name: GitLab LoL
                    client_id: b47ed30efa808f7d193058be8cd44970
                    client_secret: e7a42b71db5984614887051dee0ac239
                    client_id_issued_at: '2021-08-19T22:05:51.346Z'
                    client_secret_expires_at: 0
                    client_public: '1629410751300'
                    type: 1
                    status: 2
                    prefix: Bearer
                    description: My Local server for projects dev
                    groupId: 56
                    ownerId: e2931920-e402-11ea-a30d-83c978a74aaa
                    logo_uri: 'https://gitlab.lol.com/logo'
                    client_uri: 'https://gitlab.lol.com'
                    tos_uri: 'https://gitlab.lol.com/tos'
                    policy_uri: 'https://gitlab.lol.com/policy'
                    jwks_uri: 'https://gitlab.lol.com/jwks'
                    registration_client_uri: 'https://www.tropipay.com/api/v2/credential/b47ed30efa808f7d193058be8cd44970'
                    userinfo_encrypted_response_alg: RSA1_5
                    userinfo_encrypted_response_enc: A128CBC-HS256
                    token_endpoint_auth_method: client_secret_basic
                    scope:
                      - ALLOW_EXTERNAL_CHARGE
                      - BLOCKED_MONEY_OUT
                      - ALLOW_PAYMENT_OUT
                    domain:
                      - .*gitlab.lol.com/.*
                      - 127.0.0.1
                    contacts:
                      - support@gitlab.lol.com
                      - help@gitlab.lol.com
                    redirect_uris:
                      - 'https://gitlab.lol.com/callback2'
                      - 'https://gitlab.lol.com/callback3'
                      - 'https://gitlab.lol.com/callback'
                    grant_types:
                      - authorization_code
                      - refresh_token
                      - client_credential
        '401':
          $ref: '#/components/responses/FailedAuthenticateResponse'
      description: |
        This endpoint return a list credentials assigned to user. 

        ```
                +--------(A)- Initial Access Token
                |
                |   +----(B)- Software Statement (OPTIONAL)
                |   |
                v   v
            +-----------+                                      +---------------+
            |           |--(C)- Client Registration Request -->|    Client     |
            | Client or |                                      | Registration  |
            | Developer |<-(D)- Client Information Response ---|   Endpoint    |
            |           |        or Client Error Response      +---------------+
            +-----------+
        ```
           Figure 1: Abstract Dynamic Client Registration Flow
           
        The abstract OAuth 2.0 client dynamic registration flow illustrated
           in Figure 1 describes the interaction between the client or developer
           and the endpoint defined in this specification.  This figure does not
           demonstrate error conditions.  This flow includes the following
           steps:

        - (A)   Optionally, the client or developer is issued an initial access
                 token giving access to the client registration endpoint.  The
                 method by which the initial access token is issued to the
                 client or developer is out of scope for this specification.

        - (B)   Optionally, the client or developer is issued a software
                 statement for use with the client registration endpoint.  The
                 method by which the software statement is issued to the client
                 or developer is out of scope for this specification.

        - (C)   The client or developer calls the client registration endpoint
                 with the client's desired registration metadata, optionally
                 including the initial access token from (A) if one is required
                 by the authorization server.

        - (D)   The authorization server registers the client and returns:
            *  the client's registered metadata,
            *  a client identifier that is unique at the server, and
            *  a set of client credentials such as a client secret, if applicable for this client.
                    

        There are different types of credentials:
        - **Base:** By default, users have a base credential made up of the user and password pair, from here the permissions are inherited for the rest of the user's credentials.
        - **MFA:** For Two Factor Authentication or Multi Factor Authentication in general.
        - **ApiKey:** An application programming interface key (API key) is a unique identifier used to authenticate a user, developer, or calling program to an API. However, they are typically used to authenticate a project with the API rather than a human user. Different platforms may implement and use API keys in different ways.   

        Take into account that the credential name must be unique, it is used to identify it, and it is the name that is registered in the list of applications of another user, when this authorizes an external credential to execute operations on his behalf. 

        ```json
        {
            "automate":"generate_password",
            "domain": ".*tropipay.com.* www.demo.cuuuu",
            "scope": "ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT ALLOW_OTA_CHARGE"
        }
        ```

        Among the parameters that are specified as input are all those defined for a credential and some additional options that are described below:
        - **automate:** Optional parameter, data type is string, allowed values: generate_secret (generates a secret key automatically and modifies the public and passord or clinet_secret fields), generate_password (generates a password or client_secret randomly from the secret field, also updates the public field).
        - **domain:** List of regular expressions separated by a blank space, where each expression is a security restriction, it can be based on the DNS or application domain by its name or on the ip address.
        - **scope:** Scope is a mechanism in OAuth 2.0 to limit an application's access to a user's account. An application can request one or more scopes, this information is then presented to the user in the consent screen, and the access token issued to the application will be limited to the scopes granted. The OAuth spec allows the authorization server or user to modify the scopes granted to the application compared to what is requested, although there are not many examples of services doing this in practice.
        - **status:** the status of a credential determine its validity, which can adopt different values:* 0 as created, 1 as declined, 2 as approved*.
        - **prefix:** determines the type of authentication token to use, **Bearer** assumes by default.
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                type:
                  type: number
                name:
                  type: string
                  minLength: 1
                username:
                  type: string
                  minLength: 1
                password:
                  type: string
                  minLength: 1
                secret:
                  type: string
                  minLength: 1
                public:
                  type: string
                prefix:
                  type: string
                  minLength: 1
                domain:
                  type: string
                  minLength: 1
                status:
                  type: number
                expiration:
                  type: string
                  minLength: 1
                refresh:
                  type: string
                  minLength: 1
                redirect:
                  type: string
                  minLength: 1
                groupId:
                  type: number
                ownerId:
                  type: number
              required:
                - type
                - name
                - username
                - password
                - secret
                - public
                - prefix
                - domain
                - status
                - expiration
                - refresh
                - redirect
                - groupId
                - ownerId
              x-examples:
                example-1:
                  type: 1
                  name: gitlab.my
                  username: 991aea6a4587040942b8599a6d8fbebb
                  password: 991aea6a458704094254545454545454
                  secret: Bx*K3eVr=We'HUK5aNp4XwQE?h=4#
                  public: ''
                  prefix: Bearer
                  domain: .*tropipay.com.* www.demo.cuuuu
                  status: 2
                  expiration: '2021-08-20'
                  refresh: 1d
                  redirect: 'https://my.domain.com/oauth'
                  groupId: 24
                  ownerId: 21
            examples:
              'Automatic password generation ':
                value:
                  grant_type: generate_password
                  domain: .*tropipay.com.* www.demo.cuuuu
                  scope: ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT ALLOW_OTA_CHARGE
              Default request:
                value:
                  name: demo2
              Full Request:
                value:
                  client_name: GitLab LoL
                  domain:
                    - .*gitlab.lol.com/.*
                    - 127.0.0.1
                  scope:
                    - ALLOW_EXTERNAL_CHARGE
                    - BLOCKED_MONEY_OUT
                    - ALLOW_PAYMENT_OUT
                  status: 2
                  logo_uri: 'https://gitlab.lol.com/logo'
                  client_uri: 'https://gitlab.lol.com'
                  policy_uri: 'https://gitlab.lol.com/policy'
                  tos_uri: 'https://gitlab.lol.com/tos'
                  jwks_uri: 'https://gitlab.lol.com/jwks'
                  description: My Local server for projects dev
                  redirect_uri: 'https://gitlab.lol.com/callback'
                  redirect_uris:
                    - 'https://gitlab.lol.com/callback2'
                    - 'https://gitlab.lol.com/callback3'
                  contacts:
                    - support@gitlab.lol.com
                    - help@gitlab.lol.com
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Access & Credentials
  '/credential/:client_id':
    get:
      summary: Credential details
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                x-examples:
                  example-1:
                    status: OK
                    data:
                      type: 1
                      name: demo2
                      username: 991aea6a4587040942b8599a6d8fbebb
                      password: 8b9e91dc70aebf1d058a69966798d5c3
                      public: '1629134913542'
                      prefix: Bearer
                      domain: .*tropipay.com.* www.demo.cu
                      status: 2
                      expiration: null
                      refresh: 1d
                      redirect: null
                      groupId: 45
                      ownerId: e2931920-e402-11ea-a30d-83c978a74aaa
                      createdAt: '2021-08-16T17:13:19.684Z'
                      updatedAt: '2021-08-16T17:28:33.577Z'
                      group:
                        name: demo2
                        id: 45
                        permissions:
                          - name: ALLOW_EXTERNAL_CHARGE
                            label: payments
                            GroupPermission:
                              groupId: 45
                              permissionId: 1
                              createdAt: '2021-08-16T17:28:33.568Z'
                              updatedAt: '2021-08-16T17:28:33.568Z'
                          - name: BLOCKED_MONEY_OUT
                            label: payments
                            GroupPermission:
                              groupId: 45
                              permissionId: 2
                              createdAt: '2021-08-16T17:28:33.573Z'
                              updatedAt: '2021-08-16T17:28:33.573Z'
                properties:
                  status:
                    type: string
                    minLength: 1
                  data:
                    $ref: '#/components/schemas/Credential'
                required:
                  - status
                  - data
              examples:
                example-1:
                  value:
                    status: OK
                    data:
                      type: 1
                      name: demo2
                      username: 991aea6a4587040942b8599a6d8fbebb
                      password: 8b9e91dc70aebf1d058a69966798d5c3
                      public: '1629134913542'
                      prefix: Bearer
                      domain: .*tropipay.com.* www.demo.cu
                      status: 2
                      expiration: '2021-08-16T17:28:33.568Z'
                      refresh: 1d
                      redirect: 'https://my.domain.com/oauth'
                      groupId: 45
                      ownerId: e2931920-e402-11ea-a30d-83c978a74aaa
                      createdAt: '2021-08-16T17:13:19.684Z'
                      updatedAt: '2021-08-16T17:28:33.577Z'
                      group:
                        name: demo2
                        id: 45
                        permissions:
                          - name: ALLOW_EXTERNAL_CHARGE
                            label: payments
                          - name: BLOCKED_MONEY_OUT
                            label: payments
        '400':
          $ref: '#/components/responses/OauthBadRequestResponse'
        '401':
          $ref: '#/components/responses/FailedAuthenticateResponse'
      operationId: 'get-credential-:name'
      description: This endpoint returns information about a credential by its owner Id or username.
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
        - schema:
            type: string
            example: demo2
          in: query
          name: name
          description: Credential name
      tags:
        - Access & Credentials
    put:
      summary: Update a credential
      operationId: 'put-credential-:name'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Credential'
              examples:
                example:
                  value:
                    client_name: GitLab LoL
                    client_id: 5d6fd52d1796bd41632099cb5444b7f6
                    client_secret: 48c0dcaa3e209ec5c4c2623154ab52ab
                    client_id_issued_at: '2021-08-19T20:10:19.199Z'
                    client_secret_expires_at: 0
                    client_public: '1629409307441'
                    type: 1
                    status: 2
                    prefix: Bearer
                    description: My Local server for projects dev
                    groupId: 52
                    ownerId: e2931920-e402-11ea-a30d-83c978a74aaa
                    logo_uri: 'https://gitlab.lol.com/logo'
                    client_uri: 'https://gitlab.lol.com'
                    tos_uri: 'https://gitlab.lol.com/tos'
                    policy_uri: 'https://gitlab.lol.com/policy'
                    jwks_uri: 'https://gitlab.lol.com/jwks'
                    registration_client_uri: 'https://www.tropipay.com/api/v2/credential/5d6fd52d1796bd41632099cb5444b7f6'
                    userinfo_encrypted_response_alg: RSA1_5
                    userinfo_encrypted_response_enc: A128CBC-HS256
                    token_endpoint_auth_method: client_secret_basic
                    scope:
                      - ALLOW_EXTERNAL_CHARGE
                      - BLOCKED_MONEY_OUT
                      - ALLOW_PAYMENT_OUT
                    domain:
                      - .*gitlab.lol.com/.*
                      - 127.0.0.1
                    contacts:
                      - support@gitlab.lol.com
                      - help@gitlab.lol.com
                    redirect_uris:
                      - 'https://gitlab.lol.com/callback2'
                      - 'https://gitlab.lol.com/callback3'
                      - 'https://gitlab.lol.com/callback'
                    grant_types:
                      - authorization_code
                      - refresh_token
                      - client_credential
        '400':
          $ref: '#/components/responses/OauthBadRequestResponse'
        '401':
          $ref: '#/components/responses/FailedAuthenticateResponse'
      description: |-
        This endpoint allow to update a credential by it Client Id or username.

        There are different types of credentials:
        - **Base:** By default, users have a base credential made up of the user and password pair, from here the permissions are inherited for the rest of the user's credentials.
        - **MFA:** For Two Factor Authentication or Multi Factor Authentication in general.
        - **ApiKey:** An application programming interface key (API key) is a unique identifier used to authenticate a user, developer, or calling program to an API. However, they are typically used to authenticate a project with the API rather than a human user. Different platforms may implement and use API keys in different ways.   

        Take into account that the credential name must be unique, it is used to identify it, and it is the name that is registered in the list of applications of another user, when this authorizes an external credential to execute operations on his behalf. 

        ```json
        {

            "automate":"generate_password",
            "domain": ".*tropipay.com.* www.demo.es .*localhost.* .*127.0.0.1.*",
            "scope": "ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT ALLOW_OTA_CHARGE"
        }
        ```

        Among the parameters that are specified as input are all those defined for a credential and some additional options that are described below:
        - **automate:** Optional parameter, data type is string, allowed values: generate_secret (generates a secret key automatically and modifies the public and passord or clinet_secret fields), generate_password (generates a password or client_secret randomly from the secret field, also updates the public field).
        - **domain:** List of regular expressions separated by a blank space, where each expression is a security restriction, it can be based on the DNS or application domain by its name or on the ip address.
        - **scope:** Scope is a mechanism in OAuth 2.0 to limit an application's access to a user's account. An application can request one or more scopes, this information is then presented to the user in the consent screen, and the access token issued to the application will be limited to the scopes granted. The OAuth spec allows the authorization server or user to modify the scopes granted to the application compared to what is requested, although there are not many examples of services doing this in practice.
        - **status:** the status of a credential determine its validity, which can adopt different values:* 0 as created, 1 as declined, 2 as approved*.
        - **prefix:** determines the type of authentication token to use, **Bearer** assumes by default.


         
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                type:
                  type: number
                name:
                  type: string
                  minLength: 1
                username:
                  type: string
                  minLength: 1
                password:
                  type: string
                  minLength: 1
                domain:
                  type: string
                  minLength: 1
                scope:
                  type: string
                  minLength: 1
                secret:
                  type: string
                  minLength: 1
                public:
                  type: string
                prefix:
                  type: string
                  minLength: 1
                status:
                  type: number
                expiration:
                  type: string
                  minLength: 1
                refresh:
                  type: string
                  minLength: 1
                redirect:
                  type: string
                  minLength: 1
                groupId:
                  type: number
                ownerId:
                  type: number
              required:
                - type
                - name
                - username
                - password
                - domain
                - scope
                - secret
                - public
                - prefix
                - status
                - expiration
                - refresh
                - redirect
                - groupId
                - ownerId
              x-examples:
                example-1:
                  type: 1
                  name: Gitlab.My
                  username: 991aea6a4587040942b8599a6d8fbebb
                  password: 991aea6a458704094254545454545454
                  domain: .*tropipay.com.* www.demo.cuuuu
                  scope: ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT ALLOW_OTA_CHARGE
                  secret: Bx*K3eVr=We'HUK5aNp4XwQE?h=4#
                  public: ''
                  prefix: Bearer
                  status: 2
                  expiration: '2021-08-20'
                  refresh: 1d
                  redirect: 'https://my.domain.com/oauth'
                  groupId: 24
                  ownerId: 21
            examples:
              Full Request:
                value:
                  domain:
                    - .*gitlab.lol.com/.*
                    - 127.0.0.1
                  scope:
                    - ALLOW_EXTERNAL_CHARGE
                    - BLOCKED_MONEY_OUT
                    - ALLOW_PAYMENT_OUT
                  status: 2
                  logo_uri: 'https://gitlab.lol.com/logo'
                  client_uri: 'https://gitlab.lol.com'
                  policy_uri: 'https://gitlab.lol.com/policy'
                  tos_uri: 'https://gitlab.lol.com/tos'
                  jwks_uri: 'https://gitlab.lol.com/jwks'
                  description: My Local server for projects dev
                  client_name: GitLab LoL
                  redirect_uri: 'https://gitlab.lol.com/callback'
                  redirect_uris:
                    - 'https://gitlab.lol.com/callback2'
                    - 'https://gitlab.lol.com/callback3'
                  contacts:
                    - support@gitlab.lol.com
                    - help@gitlab.lol.com
                  automate: generate_password
              Auto Generate Password:
                value:
                  automate: generate_password
              'Set security restrictions ':
                value:
                  domain: .*tropipay.com.* www.demo.es .*localhost.* 127.0.0.1
                  scope: ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT ALLOW_OTA_CHARGE
          application/xml:
            schema:
              type: object
              properties: {}
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Credential'
            examples:
              Generate Password:
                value:
                  grant_type: generate_password
        description: ''
      tags:
        - Access & Credentials
    delete:
      summary: Delete a credential
      operationId: 'delete-credential-:name'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Credential'
              examples:
                if no exist: {}
                ok:
                  value:
                    client_name: GitLab LoL
                    client_id: 5d6fd52d1796bd41632099cb5444b7f6
                    client_secret: 48c0dcaa3e209ec5c4c2623154ab52ab
                    client_id_issued_at: '2021-08-19T20:10:19.199Z'
                    client_secret_expires_at: 0
                    client_public: '1629409307441'
                    type: 1
                    status: 2
                    prefix: Bearer
                    description: My Local server for projects dev
                    groupId: 52
                    ownerId: e2931920-e402-11ea-a30d-83c978a74aaa
                    logo_uri: 'https://gitlab.lol.com/logo'
                    client_uri: 'https://gitlab.lol.com'
                    tos_uri: 'https://gitlab.lol.com/tos'
                    policy_uri: 'https://gitlab.lol.com/policy'
                    jwks_uri: 'https://gitlab.lol.com/jwks'
                    registration_client_uri: 'https://www.tropipay.com/api/v2/credential/5d6fd52d1796bd41632099cb5444b7f6'
                    userinfo_encrypted_response_alg: RSA1_5
                    userinfo_encrypted_response_enc: A128CBC-HS256
                    token_endpoint_auth_method: client_secret_basic
                    scope:
                      - ALLOW_EXTERNAL_CHARGE
                      - BLOCKED_MONEY_OUT
                      - ALLOW_PAYMENT_OUT
                    domain:
                      - .*gitlab.lol.com/.*
                      - 127.0.0.1
                    contacts:
                      - support@gitlab.lol.com
                      - help@gitlab.lol.com
                    redirect_uris:
                      - 'https://gitlab.lol.com/callback2'
                      - 'https://gitlab.lol.com/callback3'
                      - 'https://gitlab.lol.com/callback'
                    grant_types:
                      - authorization_code
                      - refresh_token
                      - client_credential
        '400':
          $ref: '#/components/responses/OauthBadRequestResponse'
        '401':
          $ref: '#/components/responses/FailedAuthenticateResponse'
      description: This endpoint allow to delete a credential by it Client Id or username.
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Access & Credentials
    parameters: []
  /credential/grant/list:
    get:
      summary: Available permissions
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ''
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - name
                    - label
                  properties:
                    name:
                      type: string
                      minLength: 1
                    label:
                      type: string
                      minLength: 1
                x-examples:
                  example-1:
                    - name: ALLOW_EXTERNAL_CHARGE
                      label: payments
                    - name: BLOCKED_MONEY_OUT
                      label: payments
                    - name: ALLOW_OTA_CHARGE
                      label: payments_in
                    - name: ALLOW_SELF_CHARGE
                      label: payments_in
                    - name: ALLOW_REDEEM_CODE
                      label: payments_in
                    - name: ALLOW_CHARGE_VOUCHER
                      label: payments_in
                    - name: ALLOW_EXTERNAL_TOPUP
                      label: payments_in
                    - name: ALLOW_INTERNAL_TRANSFER_IN
                      label: payments_in
                    - name: ALLOW_GIFT_CARD
                      label: payments_out
                    - name: ALLOW_RECHARGE
                      label: payments_out
                    - name: ALLOW_EXTERNAL_TRANSFER
                      label: payments_out
                    - name: ALLOW_INTERNAL_TRANSFER_OUT
                      label: payments_out
                    - name: ALLOW_CREATE_BENEFICIARY
                      label: app
                    - name: ALLOW_UPDATE_BENEFICIARY
                      label: app
                    - name: ALLOW_DELETE_BENEFICIARY
                      label: app
                    - name: ALLOW_UPDATE_PROFILE
                      label: app
                    - name: ALLOW_PAYMENT_IN
                      label: generic
                    - name: ALLOW_PAYMENT_OUT
                      label: generic
                    - name: ALLOW_MARKET_PURCHASES
                      label: generic
                    - name: UPLOAD_DOCUMENT
                      label: support
              examples:
                example-1:
                  value:
                    - name: ALLOW_EXTERNAL_CHARGE
                      label: payments
                    - name: BLOCKED_MONEY_OUT
                      label: payments
                    - name: ALLOW_OTA_CHARGE
                      label: payments_in
                    - name: ALLOW_SELF_CHARGE
                      label: payments_in
                    - name: ALLOW_REDEEM_CODE
                      label: payments_in
                    - name: ALLOW_CHARGE_VOUCHER
                      label: payments_in
                    - name: ALLOW_EXTERNAL_TOPUP
                      label: payments_in
                    - name: ALLOW_INTERNAL_TRANSFER_IN
                      label: payments_in
                    - name: ALLOW_GIFT_CARD
                      label: payments_out
                    - name: ALLOW_RECHARGE
                      label: payments_out
                    - name: ALLOW_EXTERNAL_TRANSFER
                      label: payments_out
                    - name: ALLOW_INTERNAL_TRANSFER_OUT
                      label: payments_out
                    - name: ALLOW_CREATE_BENEFICIARY
                      label: app
                    - name: ALLOW_UPDATE_BENEFICIARY
                      label: app
                    - name: ALLOW_DELETE_BENEFICIARY
                      label: app
                    - name: ALLOW_UPDATE_PROFILE
                      label: app
                    - name: ALLOW_PAYMENT_IN
                      label: generic
                    - name: ALLOW_PAYMENT_OUT
                      label: generic
                    - name: ALLOW_MARKET_PURCHASES
                      label: generic
                    - name: UPLOAD_DOCUMENT
                      label: support
        '400':
          $ref: '#/components/responses/OauthBadRequestResponse'
        '401':
          $ref: '#/components/responses/FailedAuthenticateResponse'
      operationId: get-credential-grant-list
      description: Get the list of available permits for scope field
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Access & Credentials
  /credential/grant/allow:
    post:
      summary: Check credential access
      operationId: post-credential-grant-allow
      responses:
        '200':
          description: |-
            The response is made up of several fields that allow to determine if the credential is valid to execute actions based on permissions, the field called 'valid' is the determinant and the rest allow to identify the factors that influence the value of the valid field. 

            - **valid:** it is of type boolean, it takes a true value if it complies with all the permissions specified in the scope field, it also checks that it is a valid credential based on the status and its expiration date if it is defined, finally it checks that the domain of the request complies with the restrictions defined in the domain field. This is the field that determines whether or not the credential is valid for certain permissions

            - **domain:** it is of type boolean, it takes a true value if it complies with all the restrictions specified in the domain field. It also evaluates the status of the credential and if it has expired.

            - **grants:** It contains the list of valid permissions for the credential, in this way it can be confirmed if any of the requested permissions is partially fulfilled. Note that for the grant to be valid, the credential must have all the requested permissions, if at least one of the requested permissions is not assigned to the credential, the valid field would take a false value. 
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  valid:
                    type: boolean
                  domain:
                    type: boolean
                  grants:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - name
                      properties:
                        name:
                          type: string
                          minLength: 1
                        groups:
                          type: array
                          uniqueItems: true
                          minItems: 1
                          items:
                            required:
                              - name
                            properties:
                              name:
                                type: string
                                minLength: 1
                              credentials:
                                type: array
                                uniqueItems: true
                                minItems: 1
                                items:
                                  required:
                                    - name
                                  properties:
                                    name:
                                      type: string
                                      minLength: 1
                                    owner:
                                      type: object
                                      properties:
                                        email:
                                          type: string
                                          minLength: 1
                                        group:
                                          type: object
                                          properties:
                                            name:
                                              type: string
                                              minLength: 1
                                            permissions:
                                              type: array
                                              uniqueItems: true
                                              minItems: 1
                                              items:
                                                required:
                                                  - name
                                                properties:
                                                  name:
                                                    type: string
                                                    minLength: 1
                                          required:
                                            - name
                                            - permissions
                                      required:
                                        - email
                                        - group
                required:
                  - valid
                  - domain
                  - grants
                x-examples:
                  example-1:
                    valid: false
                    domain: false
                    grants:
                      - name: ALLOW_PAYMENT_IN
                        groups:
                          - name: gitlab.my
                            credentials:
                              - name: gitlab.my
                                owner:
                                  email: tonykssa@gmail.com
                                  group:
                                    name: KYC3_FULL_ALLOW
                                    permissions:
                                      - name: ALLOW_PAYMENT_IN
              examples:
                Valid grants but no domain:
                  value:
                    valid: false
                    domain: false
                    grants:
                      - name: ALLOW_EXTERNAL_CHARGE
                        groups:
                          - name: gitlab.my
                            credentials:
                              - name: gitlab.my
                                owner:
                                  email: user@mail.com
                                  group:
                                    name: KYC3_FULL_ALLOW
                                    permissions:
                                      - name: ALLOW_PAYMENT_OUT
                                      - name: ALLOW_EXTERNAL_CHARGE
                Valid domain but no grants:
                  value:
                    valid: false
                    domain: true
                    grants:
                      - name: ALLOW_EXTERNAL_CHARGE
                        groups:
                          - name: gitlab.my
                            credentials:
                              - name: gitlab.my
                                owner:
                                  email: user@mail.com
                                  group:
                                    name: KYC3_FULL_ALLOW
                                    permissions:
                                      - name: ALLOW_PAYMENT_IN
                                      - name: ALLOW_EXTERNAL_CHARGE
                'Valid ':
                  value:
                    valid: true
                    domain: true
                    grants:
                      - name: ALLOW_EXTERNAL_CHARGE
                        groups:
                          - name: gitlab.my
                            credentials:
                              - name: gitlab.my
                                owner:
                                  email: user@mail.com
                                  group:
                                    name: KYC3_FULL_ALLOW
                                    permissions:
                                      - name: ALLOW_PAYMENT_IN
                                      - name: ALLOW_EXTERNAL_CHARGE
                      - name: ALLOW_PAYMENT_IN
                        groups:
                          - name: gitlab.my
                            credentials:
                              - name: gitlab.my
                                owner:
                                  email: tonykssa@gmail.com
                                  group:
                                    name: KYC3_FULL_ALLOW
                                    permissions:
                                      - name: ALLOW_PAYMENT_IN
                                      - name: ALLOW_EXTERNAL_CHARGE
        '400':
          $ref: '#/components/responses/OauthBadRequestResponse'
        '401':
          $ref: '#/components/responses/FailedAuthenticateResponse'
      description: |
        Allows you to check if a credential complies with a list of permissions, from the specification of the scope field.

        ```
        {
          "scope": "ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT"
          "expiration": "2021-08-20T00:00:00.000Z",
          "domain": ".*localhost.* .*127.0.0.1.*",
          "status": 2
        }
        ```
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                permissions:
                  type: array
                  items:
                    required: []
                    properties: {}
              required:
                - name
                - permissions
              x-examples:
                example-1:
                  name: gitlab.my
                  permissions:
                    - ALLOW_EXTERNAL_CHARGE
                    - ALLOW_PAYMENT_OUT
            examples:
              example-1:
                value:
                  name: gitlab.my
                  permissions:
                    - ALLOW_EXTERNAL_CHARGE
                    - ALLOW_PAYMENT_IN
          application/xml:
            schema:
              type: object
              properties: {}
            examples:
              example-1:
                value: {}
        description: ''
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Access & Credentials
  /access/token:
    post:
      summary: Login
      operationId: post-access-token
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  access_token:
                    type: string
                    minLength: 1
                  refresh_token:
                    type: string
                    minLength: 1
                  token_type:
                    type: string
                    minLength: 1
                  scope:
                    type: string
                    minLength: 1
                  expires_in:
                    type: string
                    minLength: 1
                required:
                  - access_token
                  - refresh_token
                  - token_type
                  - scope
                  - expires_in
                x-examples:
                  example-1:
                    access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjcmVkZW50aWFsTmFtZSI6ImdpdGxhYi5teSIsImlkIjoiZTI5MzE5MjAtZTQwMi0xMWVhLWEzMGQtODNjOTc4YTc0YWFhIiwiaWF0IjoxNjI5MTczMTk3LCJleHAiOjE2MjkyNTk1OTd9.EMga30PwXdKU8eM7BnbV26pyZPx0dVj8fpB-wg7n2fo
                    refresh_token: Z2l0bGFiLm15OmVhYjIwNTVkYWM0ODQyOTcwNWQ4YmEzYTRiMDRmZDBl
                    token_type: Bearer
                    scope: ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT
                    expires_in: 1d
              examples:
                example-1:
                  value:
                    access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjcmVkZW50aWFsTmFtZSI6ImdpdGxhYi5teSIsImlkIjoiZTI5MzE5MjAtZTQwMi0xMWVhLWEzMGQtODNjOTc4YTc0YWFhIiwiaWF0IjoxNjI5MTczMTk3LCJleHAiOjE2MjkyNTk1OTd9.EMga30PwXdKU8eM7BnbV26pyZPx0dVj8fpB-wg7n2fo
                    refresh_token: Z2l0bGFiLm15OmVhYjIwNTVkYWM0ODQyOTcwNWQ4YmEzYTRiMDRmZDBl
                    token_type: Bearer
                    scope: ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT
                    expires_in: 1d
      description: |-
        The Client Credentials grant type is used by clients to obtain an access token outside of the context of a user. This is typically used by clients to access resources about themselves rather than to access a user's resources.

        ### Application access

        In some cases, applications may need an access token to act on behalf of themselves rather than a user. For example, the service may provide a way for the application to update their own information such as their website URL or icon, or they may wish to get statistics about the users of the app. In this case, applications need a way to get an access token for their own account, outside the context of any specific user. OAuth provides the client_credentials grant type for this purpose.

        To use the client credentials grant type, make a POST request like the following:

        ```
        POST https://api.authorization-server.com/token
            grant_type=client_credentials&
            client_id=CLIENT_ID&
            client_secret=CLIENT_SECRET
        ```

        The response will include an access token in the same format as the other grant types.
        Making Authenticated Requests

        The end result of all the grant types is obtaining an access token.

        Now that you have an access token, you can make requests to the API. You can quickly make an API request using cURL as follows:

        ```
        curl -H "Authorization: Bearer RsT5OjbzRn430zqMLgV3Ia" \
        https://api.authorization-server.com/1/me
        ```

        That's it! Make sure you always send requests over HTTPS and never ignore invalid certificates. HTTPS is the only thing protecting requests from being intercepted or modified.

        ### Differences from OAuth 1.0

        OAuth 1.0 was largely based on existing proprietary protocols such as Flickr's "FlickrAuth" and Google's "AuthSub". The result represented the best solution based on actual implementation experience. However, after several years of working with the protocol, the community learned enough to rethink and improve the protocol in three main areas where OAuth 1.0 proved limited or confusing.


        ### Bearer Tokens

        Bearer tokens are a much simpler way of making API requests, since they don’t require cryptographic signing of each request. The tradeoff is that all API requests must be made over an HTTPS connection, since the request contains a plaintext token that could be used by anyone if it were intercepted. The advantage is that it doesn’t require complex libraries to make requests and is much simpler for both clients and servers to implement.

        The downside to Bearer tokens is that there is nothing preventing other apps from using a Bearer token if it can get access to it. This is a common criticism of OAuth 2.0, although most providers only use Bearer tokens anyway. Under normal circumstances, when applications properly protect the access tokens under their control, this is not a problem, although technically it is less secure. If your service requires a more secure approach, you can a different access token type that may meet your security requirements.
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                client_id:
                  type: string
                  minLength: 1
                client_secret:
                  type: string
                  minLength: 1
              required:
                - name
                - client_id
                - client_secret
              x-examples:
                example-1:
                  name: client_credentials
                  client_id: 991aea6a4587040942b8599a6d8fbebb
                  client_secret: 796c0519dace8efdeaf59e6ad40e811a
            examples:
              example-1:
                value:
                  grant_type: client_credentials
                  client_id: 991aea6a4587040942b8599a6d8fbebb
                  client_secret: 796c0519dace8efdeaf59e6ad40e811a
                  scope: ALLOW_EXTERNAL_CHARGE BLOCKED_MONEY_OUT
      tags:
        - Access & Credentials
  /paymentcards:
    get:
      summary: PaymentCards list
      responses:
        '200':
          $ref: '#/components/responses/paymentCardList'
      operationId: get-paymentcards
      description: Shows a list of stored paymentcards created by user. This list includes active and closed paylinks
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Payment Cards
    post:
      summary: Create Payment Card
      operationId: post-paymentcards
      responses:
        '200':
          $ref: '#/components/responses/paymentCard'
      description: 'This endpoint allows you to generate a payment link. This allows you to make a deposit from people who do not belong to the TropiPay platform in a very simple way, share your payment links and manage your charges.'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              x-examples:
                example-1:
                  reference: my-reference
                  concept: Bicycle
                  favorite: true
                  description: Two wheels
                  amount: 100000
                  currency: EUR
                  singleUse: true
                  reasonId: 4
                  expirationDays: 1
                  lang: es
                  urlSuccess: 'https://my-business.com/payment-ok'
                  urlFailed: 'https://my-business.com/payment-ko'
                  urlNotification: 'https://my-business.com/payment-callback'
                  serviceDate: '2021-08-20'
                  client:
                    name: John
                    lastName: McClane
                    address: 'Ave. Guadí 232, Barcelona, Barcelona'
                    phone: '+34645553333'
                    email: client@email.com
                    countryId: 1
                    termsAndConditions: 'true'
                  directPayment: true
              properties:
                reference:
                  type: string
                  minLength: 1
                concept:
                  type: string
                  minLength: 1
                favorite:
                  type: boolean
                description:
                  type: string
                  minLength: 1
                amount:
                  type: number
                currency:
                  type: string
                  minLength: 1
                singleUse:
                  type: boolean
                reasonId:
                  type: number
                expirationDays:
                  type: number
                lang:
                  type: string
                  minLength: 1
                urlSuccess:
                  type: string
                  minLength: 1
                urlFailed:
                  type: string
                  minLength: 1
                urlNotification:
                  type: string
                  minLength: 1
                serviceDate:
                  type: string
                  minLength: 1
                client:
                  type: object
                  required:
                    - name
                    - lastName
                    - address
                    - phone
                    - email
                    - countryId
                    - termsAndConditions
                  properties:
                    name:
                      type: string
                      minLength: 1
                    lastName:
                      type: string
                      minLength: 1
                    address:
                      type: string
                      minLength: 1
                    phone:
                      type: string
                      minLength: 1
                    email:
                      type: string
                      minLength: 1
                    countryId:
                      type: number
                    termsAndConditions:
                      type: string
                      minLength: 1
                directPayment:
                  type: boolean
                paymentMethods:
                  type: array
                  description: 'Optional: if included, sets which payment methods will be available for paying this paymentCard. Possible options are: ''EXT'' for external cards (visa, mastercard, etc) and ''TPP'' for payment with tropipay balance. If missing, all payment methods will be available to users'
                  uniqueItems: false
                  items:
                    type: string
                    enum:
                      - EXT
                      - TPP
                    example: '[''TPP'']'
              required:
                - reference
                - concept
                - favorite
                - description
                - amount
                - currency
                - singleUse
                - reasonId
                - expirationDays
                - lang
                - urlSuccess
                - urlFailed
                - urlNotification
                - serviceDate
                - client
                - directPayment
            examples:
              Example with Client Data:
                value:
                  reference: my-reference
                  concept: Bicycle
                  favorite: true
                  description: Two wheels
                  amount: 100000
                  currency: EUR
                  singleUse: true
                  reasonId: 4
                  expirationDays: 1
                  lang: es
                  urlSuccess: 'https://my-business.com/payment-ok'
                  urlFailed: 'https://my-business.com/payment-ko'
                  urlNotification: 'https://my-business.com/payment-callback'
                  serviceDate: '2021-08-20'
                  client:
                    name: John
                    lastName: McClane
                    address: 'Ave. Guadí 232, Barcelona, Barcelona'
                    phone: '+34645553333'
                    email: client@email.com
                    countryId: 1
                    termsAndConditions: 'true'
                  directPayment: true
              Example without Client Data:
                value:
                  reference: my-reference
                  concept: Bicycle
                  favorite: true
                  description: Two wheels
                  amount: 100000
                  currency: EUR
                  singleUse: true
                  reasonId: 4
                  expirationDays: 1
                  lang: es
                  urlSuccess: 'https://my-business.com/payment-ok'
                  urlFailed: 'https://my-business.com/payment-ko'
                  urlNotification: 'https://my-business.com/payment-callback'
                  serviceDate: '2021-08-20'
                  client: null
                  directPayment: false
                  paymentMethods:
                    - TPP
        description: 'These are the details of the request body:'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Payment Cards
  /paymentcards/add:
    post:
      summary: Add new Payment Card
      operationId: post-paymentcards-add
      responses:
        '200':
          $ref: '#/components/responses/paymentCard'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      description: Adds a new payment card that someone can use to send you funds from bank account
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                reference:
                  type: string
                  minLength: 1
                concept:
                  type: string
                  minLength: 1
                favorite:
                  type: boolean
                description:
                  type: string
                  minLength: 1
                amount:
                  type: number
                currency:
                  type: string
                  minLength: 1
                singleUse:
                  type: boolean
                reasonId:
                  type: number
                expirationDays:
                  type: number
                lang:
                  type: string
                  minLength: 1
                urlSuccess:
                  type: string
                  minLength: 1
                urlFailed:
                  type: string
                  minLength: 1
                urlNotification:
                  type: string
                  minLength: 1
                serviceDate:
                  type: string
                  minLength: 1
                client:
                  type: object
                  properties:
                    name:
                      type: string
                      minLength: 1
                    lastName:
                      type: string
                      minLength: 1
                    address:
                      type: string
                      minLength: 1
                    phone:
                      type: string
                      minLength: 1
                    email:
                      type: string
                      minLength: 1
                    countryId:
                      type: number
                    termsAndConditions:
                      type: string
                      minLength: 1
                  required:
                    - name
                    - lastName
                    - address
                    - phone
                    - email
                    - countryId
                    - termsAndConditions
                directPayment:
                  type: boolean
              required:
                - reference
                - concept
                - favorite
                - description
                - amount
                - currency
                - singleUse
                - reasonId
                - expirationDays
                - lang
                - urlSuccess
                - urlFailed
                - urlNotification
                - serviceDate
                - client
                - directPayment
              x-examples:
                example-1:
                  reference: my-reference
                  concept: Bicycle
                  favorite: true
                  description: Two wheels
                  amount: 100000
                  currency: EUR
                  singleUse: true
                  reasonId: 4
                  expirationDays: 1
                  lang: es
                  urlSuccess: 'https://my-business.com/payment-ok'
                  urlFailed: 'https://my-business.com/payment-ko'
                  urlNotification: 'https://my-business.com/payment-callback'
                  serviceDate: '2021-08-20'
                  client:
                    name: John
                    lastName: McClane
                    address: 'Ave. Guadí 232, Barcelona, Barcelona'
                    phone: '+34645553333'
                    email: client@email.com
                    countryId: 1
                    termsAndConditions: 'true'
                  directPayment: true
            examples:
              Example specifying client data:
                value:
                  reference: my-reference
                  concept: Bicycle
                  favorite: true
                  description: Two wheels
                  amount: 100000
                  currency: EUR
                  singleUse: true
                  reasonId: 4
                  expirationDays: 1
                  lang: es
                  urlSuccess: 'https://my-business.com/payment-ok'
                  urlFailed: 'https://my-business.com/payment-ko'
                  urlNotification: 'https://my-business.com/payment-callback'
                  serviceDate: '2021-08-20'
                  client:
                    name: John
                    lastName: McClane
                    address: 'Ave. Guadí 232, Barcelona, Barcelona'
                    phone: '+34645553333'
                    email: client@email.com
                    countryId: 1
                    termsAndConditions: 'true'
                  directPayment: true
              Example without client data:
                value:
                  reference: my-reference
                  concept: Bicycle
                  favorite: true
                  description: Two wheels
                  amount: 100000
                  currency: EUR
                  singleUse: true
                  reasonId: 4
                  expirationDays: 1
                  lang: es
                  urlSuccess: 'https://my-business.com/payment-ok'
                  urlFailed: 'https://my-business.com/payment-ko'
                  urlNotification: 'https://my-business.com/payment-callback'
                  serviceDate: '2021-08-20'
                  client: null
                  directPayment: false
      deprecated: true
      x-internal: true
  /hooks:
    get:
      summary: Get user hooks list
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ''
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - event
                    - target
                    - value
                    - createdAt
                    - updatedAt
                  properties:
                    event:
                      type: string
                      minLength: 1
                    target:
                      type: string
                      minLength: 1
                    value:
                      type: string
                      minLength: 1
                    createdAt:
                      type: string
                      minLength: 1
                    updatedAt:
                      type: string
                      minLength: 1
                x-examples:
                  example-1:
                    - event: user_login
                      target: web
                      value: 'https://webhook.site/680826a5-199e-4455-babc-f47b7f26ee7e'
                      createdAt: '2022-02-11T18:36:48.300Z'
                      updatedAt: '2022-02-11T18:36:48.300Z'
                    - event: user_kyc
                      target: email
                      value: myemail@gmail.com
                      createdAt: '2022-02-11T18:53:30.397Z'
                      updatedAt: '2022-02-11T18:53:30.397Z'
                    - event: beneficiary_added
                      target: email
                      value: myemail@gmail.com
                      createdAt: '2022-02-11T18:53:54.027Z'
                      updatedAt: '2022-02-11T18:53:54.027Z'
              examples:
                valid response:
                  value:
                    - event: user_login
                      target: web
                      value: 'https://webhook.site/680826a5-199e-4455-babc-f47b7f26ee7e'
                      createdAt: '2022-02-11T18:36:48.300Z'
                      updatedAt: '2022-02-11T18:36:48.300Z'
                    - event: user_kyc
                      target: email
                      value: myemail@gmail.com
                      createdAt: '2022-02-11T18:53:30.397Z'
                      updatedAt: '2022-02-11T18:53:30.397Z'
                    - event: beneficiary_added
                      target: email
                      value: myemail@gmail.com
                      createdAt: '2022-02-11T18:53:54.027Z'
                      updatedAt: '2022-02-11T18:53:54.027Z'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: get-api-v2-hooks
      description: 'This returns a list of user hook '
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Hooks
    post:
      summary: Inser user hook
      operationId: post-api-v2-hooks
      responses:
        '200':
          description: |
            In general, valid responses are defined as an object with three elementary properties:

            - **action:** represents the type of operation that was just executed.
            - **status:** represents the status of the operation, taking value success in case everything goes well.
            - **details:** displays additional values related to the operation, usually returns the name of the event.
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  action:
                    type: string
                    minLength: 1
                  status:
                    type: string
                    minLength: 1
                  details:
                    type: string
                    minLength: 1
                required:
                  - action
                  - status
                  - details
                x-examples:
                  example-1:
                    action: subscribe
                    status: success
                    details: user_login
              examples:
                valid response:
                  value:
                    action: subscribe
                    status: success
                    details: user_login
        '500':
          $ref: '#/components/responses/ErrorResponse'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                event:
                  type: string
                  minLength: 1
                target:
                  type: string
                  minLength: 1
                value:
                  type: string
                  minLength: 1
              required:
                - event
                - target
                - value
              x-examples:
                example-1:
                  event: user_login
                  target: web
                  value: 'https://webhook.site/680826a5-199e-4455-babc-f47b7f26ee7e'
            examples:
              add web hook:
                value:
                  event: user_login
                  target: web
                  value: 'https://webhook.site/680826a5-199e-4455-babc-f47b7f26ee7e'
              add email hook:
                value:
                  event: user_login
                  target: email
                  value: myemail@gmail.com
        description: ''
      description: Insert a user hook
      tags:
        - Hooks
    put:
      summary: Update user hook
      operationId: put-api-v2-hooks
      responses:
        '200':
          description: |-
            In general, valid responses are defined as an object with three elementary properties:

            - **action:** represents the type of operation that was just executed.
            - **status:** represents the status of the operation, taking value success in case everything goes well.
            - **details:** displays additional values related to the operation, usually returns the name of the event.
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  action:
                    type: string
                    minLength: 1
                  status:
                    type: string
                    minLength: 1
                  details:
                    type: string
                    minLength: 1
                required:
                  - action
                  - status
                  - details
                x-examples:
                  example-1:
                    action: update
                    status: success
                    details: user_login
              examples:
                valid response:
                  value:
                    action: update
                    status: success
                    details: user_login
        '500':
          $ref: '#/components/responses/ErrorResponse'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                event:
                  type: string
                  minLength: 1
                target:
                  type: string
                  minLength: 1
                value:
                  type: string
                  minLength: 1
              required:
                - event
                - target
                - value
              x-examples:
                example-1:
                  event: user_login
                  target: email
                  value: usr.tmpq@mailinator.com
            examples:
              update user_login/email:
                value:
                  event: user_login
                  target: email
                  value: usr.tmpq@mailinator.com
        description: |+

      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      description: Explicit update hook on payload request
      tags:
        - Hooks
    parameters: []
  /hooks/events:
    get:
      summary: Get user hook event list
      tags:
        - Hooks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ''
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - name
                    - description
                  properties:
                    name:
                      type: string
                      minLength: 1
                    description:
                      type: string
                      minLength: 1
                x-examples:
                  example-1:
                    - name: user_signup
                      description: Event launched once an user completes registration on the TropiPay platform.
                    - name: user_login
                      description: Event launched once an user completes login on the TropiPay platform.
                    - name: user_kyc
                      description: Event launched once an user completes kyc process.
                    - name: payment_in_state_change
                      description: The event is fired once a user changes their status payment in entry method.
                    - name: payment_out_state_change
                      description: The event is fired once a user changes their status payment out entry method.
                    - name: beneficiary_added
                      description: Launched after new beneficiary is created.
                    - name: beneficiary_updated
                      description: Launched after a beneficiary is modified.
                    - name: beneficiary_deleted
                      description: Launched after a beneficiary is deleted.
              examples:
                valid response:
                  value:
                    - name: user_signup
                      description: Event launched once an user completes registration on the TropiPay platform.
                    - name: user_login
                      description: Event launched once an user completes login on the TropiPay platform.
                    - name: user_kyc
                      description: Event launched once an user completes kyc process.
                    - name: payment_in_state_change
                      description: The event is fired once a user changes their status payment in entry method.
                    - name: payment_out_state_change
                      description: The event is fired once a user changes their status payment out entry method.
                    - name: beneficiary_added
                      description: Launched after new beneficiary is created.
                    - name: beneficiary_updated
                      description: Launched after a beneficiary is modified.
                    - name: beneficiary_deleted
                      description: Launched after a beneficiary is deleted.
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: get-hooks-events
      description: 'Get user hook event list '
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
  '/hooks/:event_name':
    get:
      summary: Select user hook
      responses:
        '200':
          description: |
            OK
          content:
            application/json:
              schema:
                type: array
                description: ''
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - event
                    - target
                    - value
                    - createdAt
                    - updatedAt
                  properties:
                    event:
                      type: string
                      minLength: 1
                    target:
                      type: string
                      minLength: 1
                    value:
                      type: string
                      minLength: 1
                    createdAt:
                      type: string
                      minLength: 1
                    updatedAt:
                      type: string
                      minLength: 1
                x-examples:
                  example-1:
                    - event: user_login
                      target: web
                      value: 'https://webhook.site/680826a5-199e-4455-babc-f47b7f26ee7e'
                      createdAt: '2022-02-11T18:36:48.300Z'
                      updatedAt: '2022-02-11T18:36:48.300Z'
                    - event: user_login
                      target: email
                      value: myemail@gmail.com
                      createdAt: '2022-02-11T18:43:24.882Z'
                      updatedAt: '2022-02-11T18:43:24.882Z'
              examples:
                valid response:
                  value:
                    - event: user_login
                      target: web
                      value: 'https://webhook.site/680826a5-199e-4455-babc-f47b7f26ee7e'
                      createdAt: '2022-02-11T18:36:48.300Z'
                      updatedAt: '2022-02-11T18:36:48.300Z'
                    - event: user_login
                      target: email
                      value: myemail@gmail.com
                      createdAt: '2022-02-11T18:43:24.882Z'
                      updatedAt: '2022-02-11T18:43:24.882Z'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: 'get-hooks-:event_name'
      description: Select hooks by event name
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Hooks
  '/hooks/:event_name/:target_name':
    get:
      summary: Select user hook by target
      responses:
        '200':
          description: |
            OK
          content:
            application/json:
              schema:
                type: array
                description: ''
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - event
                    - target
                    - value
                    - createdAt
                    - updatedAt
                  properties:
                    event:
                      type: string
                      minLength: 1
                    target:
                      type: string
                      minLength: 1
                    value:
                      type: string
                      minLength: 1
                    createdAt:
                      type: string
                      minLength: 1
                    updatedAt:
                      type: string
                      minLength: 1
                x-examples:
                  example-1:
                    - event: user_login
                      target: email
                      value: myemail@gmail.com
                      createdAt: '2022-02-11T18:43:24.882Z'
                      updatedAt: '2022-02-11T18:43:24.882Z'
              examples:
                valid response:
                  value:
                    - event: user_login
                      target: email
                      value: myemail@gmail.com
                      createdAt: '2022-02-11T18:43:24.882Z'
                      updatedAt: '2022-02-11T18:43:24.882Z'
        '500':
          $ref: '#/components/responses/ErrorResponse'
      operationId: 'get-hooks-:event_name-:target_name'
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      description: Select hook by event name and target name
      tags:
        - Hooks
    delete:
      summary: Delete user hook
      operationId: 'delete-hooks-:event_name-:target_name'
      responses:
        '200':
          description: |
            In general, valid responses are defined as an object with three elementary properties:

            - **action:** represents the type of operation that was just executed.
            - **status:** represents the status of the operation, taking value success in case everything goes well.
            - **details:** displays additional values related to the operation, usually returns the name of the event.
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  action:
                    type: string
                    minLength: 1
                  status:
                    type: string
                    minLength: 1
                  details:
                    type: string
                    minLength: 1
                required:
                  - action
                  - status
                  - details
                x-examples:
                  example-1:
                    action: unsubscribe
                    status: success
                    details: user_login
              examples:
                valid response:
                  value:
                    action: unsubscribe
                    status: success
                    details: user_login
        '500':
          $ref: '#/components/responses/ErrorResponse'
      description: Delete or unsubscribe hook by event name and target name
      parameters:
        - $ref: '#/components/parameters/User-Authorization-Token'
      tags:
        - Hooks
components:
  schemas:
    User:
      title: User Model
      type: object
      description: ''
      x-examples:
        Alice Smith:
          id: 1423
          firstName: Alice
          lastName: Smith
          email: alice.smith@gmail.com
          dateOfBirth: '1997-10-31'
          emailVerified: true
          signUpDate: '2019-08-24'
      properties:
        id:
          type: integer
          description: Unique identifier for the given user.
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
          format: email
        dateOfBirth:
          type: string
          format: date
          example: '1997-10-31'
        emailVerified:
          type: boolean
          description: Set to true if the user's email has been verified.
        createDate:
          type: string
          format: date
          description: The date that the user was created.
      required:
        - id
        - firstName
        - lastName
        - email
        - emailVerified
      x-internal: true
    AccessRequest:
      description: |-
        -  **redirectType**: the type of request defines the mode in which the login form interacts with its container, it can take one of two possible values: 
           * 1: Redirect the page to a specific address, this being specified in the parameters called *redirectUrl*. 
           * 2: Set communication with the iframe parent container using the *window.addEventListener* and *parent.postMessage messages*.
        -  **redirectUrl**: Set url to which you want to redirect once the login process has been successfully completed, it depends on the value set in the *redirectType* property.
        -  **extraCSS"**: The login form allows to adjust its graphical interface through the injection of stylesheets, this property defines the url of the remote css that you want to insert to customize the mentioned form.
      type: object
      x-examples:
        example-1:
          redirectType: 1
          extraCSS: 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'
          redirectUrl: 'https://my.merchant.com/home'
      properties:
        redirectType:
          type: number
          description: possible values 1 or 2
        extraCSS:
          type: string
          minLength: 1
          description: url of custom CSS
        redirectUrl:
          type: string
          minLength: 1
          description: redirection URL
      required:
        - redirectType
        - extraCSS
        - redirectUrl
      x-internal: true
    AccessResponse:
      description: ''
      type: object
      properties:
        url:
          type: string
          minLength: 1
      required:
        - url
      x-examples:
        example-1:
          url: 'https://www.tropipay.com/m-login/eyJtZXJjaGFudElkIjoxLCJzaWduYXR1cmUiOiJmZmVhZTE2ZDM4MmQ1ZDFjZDlkYjU5NzdmYzcxZmUzYiIsImNvZGUiOjE2MTM3Nzk4NTYxMzgsInJlZGlyZWN0VHlwZSI6IjEiLCJleHRyYUNTUyI6Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuNC4xL2Nzcy9ib290c3RyYXAubWluLmNzcyIsInJlZGlyZWN0VXJsIjoiaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbSJ9'
      x-internal: true
    ValidationParams:
      description: ''
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: array
              uniqueItems: true
              minItems: 1
              items:
                required:
                  - msg
                  - param
                  - location
                properties:
                  msg:
                    type: string
                    minLength: 1
                  param:
                    type: string
                    minLength: 1
                  location:
                    type: string
                    minLength: 1
            message:
              type: string
              minLength: 1
          required:
            - code
            - message
      required:
        - error
      x-examples:
        example-1:
          error:
            code:
              - msg: Invalid value
                param: userId
                location: body
              - msg: Invalid value
                param: userId
                location: body
            message: Invalid Parameter
      x-internal: true
    MerchantSetting:
      description: ''
      type: object
      x-examples:
        example-1:
          key: publicPrice
          value: '2.5'
          section: public
          state: '1'
          createdAt: '2021-03-18T20:10:37.670Z'
          updatedAt: '2021-03-18T20:10:37.670Z'
      properties:
        key:
          type: string
          minLength: 1
        value:
          type: string
          minLength: 1
        section:
          type: string
          minLength: 1
        state:
          type: string
          minLength: 1
        createdAt:
          type: string
          minLength: 1
        updatedAt:
          type: string
          minLength: 1
      required:
        - key
        - value
        - section
        - state
        - createdAt
        - updatedAt
      x-internal: true
    Event:
      title: Event
      type: object
      properties:
        event:
          type: string
        target:
          type: string
        value:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
      description: An Event to hook on
    Movement:
      description: Details of a movement. Sent to notificationUrl upon completion of a transaction.
      type: object
      properties:
        signature:
          type: string
        id:
          type: number
        reference:
          type: string
          minLength: 1
        bankOrderCode:
          type: string
          minLength: 1
        provider:
          type: number
        userId:
          type: string
          minLength: 1
        bookingDate:
          type: string
          minLength: 1
        days:
          type: number
        amount:
          type: number
        currency:
          type: string
          minLength: 1
        originalCurrencyAmount: {}
        destinationAmount:
          type: number
        destinationCurrency:
          type: string
          minLength: 1
        conversionRate: {}
        depositaccountId:
          type: number
        state:
          type: number
        serviceId:
          type: number
        paymentcardId:
          type: string
        expirationDate:
          type: string
        movementTypeId:
          type: number
        transactionId:
          type: number
        isInternal:
          type: boolean
        agent:
          type: string
          minLength: 1
        ip:
          type: string
          minLength: 1
        reasonId: {}
        reasonDes: {}
        paymentEntityStatus:
          type: number
        paymentEntityBalance:
          type: number
        errorReason:
          type: string
        notificationUrl:
          type: string
        riskFlag:
          type: string
        riskScore:
          type: string
        createdAt:
          type: string
          minLength: 1
        updatedAt:
          type: string
          minLength: 1
        charges:
          type: array
          items:
            type: object
      x-examples:
        Successful Notification:
          value:
            status: OK
            data:
              signature: wsaer4w534hd55345y5hTDd3TSL863K3ldk3
              id: 27376
              reference: '1574194435610'
              bankOrderCode: '1574194435610'
              provider: 4
              userId: 103ec000-703b-11e9-8aea-b7e74734087c
              bookingDate: '2019-11-19T20:13:55.613Z'
              days: null
              amount: 100000
              currency: EUR
              originalCurrencyAmount: 100000
              destinationAmount: 96450
              destinationCurrency: EUR
              conversionRate: 1
              depositaccountId: null
              state: 5
              serviceId: 2
              paymentcardId: 95aa7620-0b05-11ea-b517-dfa69b738ed5
              expirationDate: '2019-11-20T08:55:00.000Z'
              movementTypeId: 2
              transactionId: 111111
              isInternal: false
              agent: TROPIPAY
              ip: 127.0.0.1
              reasonId: ''
              reasonDes: ''
              errorReason: ''
              notificationUrl: ''
              riskFlag: 0
              riskScore: 0
              createdAt: '2019-11-19T20:13:55.614Z'
              updatedAt: '2019-11-19T20:30:04.083Z'
              paymentcard:
                id: 95aa7620-0b05-11ea-b517-dfa69b738ed5
                reference: di3khs1p0k369tj0h
                concept: concept1
                description: description1
                amount: 100000
                currency: EUR
                singleUse: false
                reasonId: 4
                userId: 103ec000-703b-11e9-8aea-b7e74734087c
                qrImage: null
                shortUrl: null
                state: 1
                expirationDays: 1
                lang: es
                urlSuccess: 'https://mi-negocio.com/pago-ok'
                urlFailed: 'https://mi-negocio.com/pago-ko'
                urlNotification: 'https://mi-negocio.com/notificacion-de-pago'
                createdAt: '2019-11-19T19:48:40.194Z'
                updatedAt: '2019-11-19T19:48:40.194Z'
              charges:
                - id: 22742
                  orderCode: '1574194435610'
                  cardPan: '0000'
                  cardExpirationDate: '2020-01-01T00:00:00.000Z'
                  cardHolderName: Antonio
                  amount: 1000
                  currency: 978
                  userId: 103ec000-703b-11e9-8aea-b7e74734087c
                  bookingId: 27376
                  errorReason: ''
                  state: 3
                  serviceId: 2
                  cardCountry: ''
                  cardBrand: VISA
                  cardCategory: BUSINESS
                  cardType: CREDIT
                  clientIp: ''
                  clientName: Antonio
                  clientLastName: Lopez
                  clientAddress: calle 280
                  clientPhone: '5300000000'
                  clientEmail: user@gmail.com
                  clientTC: 'true'
                  clientCountryId: 0
                  createdAt: '2019-11-19T20:13:55.666Z'
                  updatedAt: '2019-11-19T20:30:04.066Z'
      x-internal: true
    Credential:
      description: ''
      type: object
      x-examples:
        example:
          value:
            client_name: GitLab LoL
            client_id: 5d6fd52d1796bd41632099cb5444b7f6
            client_secret: fde8bc69b86e2a652137d900ed37a4b7
            client_id_issued_at: '2021-08-19T20:10:19.199Z'
            client_secret_expires_at: 0
            client_public: '1629403819159'
            type: 1
            status: 2
            prefix: Bearer
            description: My Local server for projects dev
            groupId: 52
            ownerId: e2931920-e402-11ea-a30d-83c978a74aaa
            logo_uri: 'https://gitlab.lol.com/logo'
            client_uri: 'https://gitlab.lol.com'
            tos_uri: 'https://gitlab.lol.com/tos'
            policy_uri: 'https://gitlab.lol.com/policy'
            jwks_uri: 'https://gitlab.lol.com/jwks'
            registration_client_uri: 'https://www.tropipay.com/api/v2/credential/5d6fd52d1796bd41632099cb5444b7f6'
            userinfo_encrypted_response_alg: RSA1_5
            userinfo_encrypted_response_enc: A128CBC-HS256
            token_endpoint_auth_method: client_secret_basic
            scope:
              - ALLOW_EXTERNAL_CHARGE
              - BLOCKED_MONEY_OUT
              - ALLOW_PAYMENT_OUT
            domain:
              - .*gitlab.lol.com/.*
              - 127.0.0.1
            contacts:
              - support@gitlab.lol.com
              - help@gitlab.lol.com
            redirect_uris:
              - 'https://gitlab.lol.com/callback2'
              - 'https://gitlab.lol.com/callback3'
              - 'https://gitlab.lol.com/callback'
            grant_types:
              - authorization_code
              - refresh_token
              - client_credential
      properties:
        client_name:
          type: string
          minLength: 1
          description: 'Human-readable string name of the client to be presented to the end-user during authorization.  If omitted, the authorization server MAY display the raw "client_id" value to the end-user instead.  It is RECOMMENDED that clients always send this field. '
        client_id:
          type: string
          minLength: 1
          description: 'Unique Client Identifier. It MUST NOT be currently valid for any other registered Client. '
        client_secret:
          type: string
          minLength: 1
          description: 'Client Secret. The same Client Secret value MUST NOT be assigned to multiple Clients. This value is used by Confidential Clients to authenticate to the Token Endpoint, as described in Section 2.3.1 of OAuth 2.0, and for the derivation of symmetric encryption key values, as described in Section 10.2 of OpenID Connect Core 1.0 [OpenID.Core]. It is not needed for Clients selecting a token_endpoint_auth_method of private_key_jwt unless symmetric encryption will be used. '
        client_id_issued_at:
          type: string
          minLength: 1
          description: 'OPTIONAL. Time at which the Client Identifier was issued. Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. '
        client_secret_expires_at:
          type: number
          description: 'if client_secret is issued. Time at which the client_secret will expire or 0 if it will not expire. Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. '
        client_public:
          type: string
          minLength: 1
        type:
          type: number
        status:
          type: number
          description: 'The status of a credential determine its validity, which can adopt different values:* 0 as created, 1 as declined, 2 as approved*.'
        prefix:
          type: string
          minLength: 1
          description: 'Determines the type of authentication token to use, **Bearer** assumes by default.'
        description:
          type: string
          minLength: 1
        groupId:
          type: number
        ownerId:
          type: string
          minLength: 1
        logo_uri:
          type: string
          minLength: 1
          description: 'URL string that references a logo for the client.  If present, the server SHOULD display this image to the end-user during approval. The value of this field MUST point to a valid image file.  '
        client_uri:
          type: string
          minLength: 1
          description: 'URL string of a web page providing information about the client. If present, the server SHOULD display this URL to the end-user in a clickable fashion.  It is RECOMMENDED that  clients always send this field.  The value of this field MUST point to a valid web page.  '
        tos_uri:
          type: string
          minLength: 1
          description: 'URL string that points to a human-readable terms of service document for the client that describes a contractual relationship between the end-user and the client that the end-user accepts when authorizing the client.  The authorization server SHOULD display this URL to the end-user if it is provided.  The value of this field MUST point to a valid web page.  '
        policy_uri:
          type: string
          minLength: 1
          description: 'URL string that points to a human-readable privacy policy document that describes how the deployment organization collects, uses, retains, and discloses personal data.  The authorization server SHOULD display this URL to the end-user if it is provided. The value of this field MUST point to a valid web page. '
        jwks_uri:
          type: string
          minLength: 1
          description: 'URL for the Client''s JSON Web Key Set [JWK] document. If the Client signs requests to the Server, it contains the signing key(s) the Server uses to validate signatures from the Client. The JWK Set MAY also contain the Client''s encryption keys(s), which are used by the Server to encrypt responses to the Client. When both signing and encryption keys are made available, a use (Key Use) parameter value is REQUIRED for all keys in the referenced JWK Set to indicate each key''s intended usage. Although some algorithms allow the same key to be used for both signatures and encryption, doing so is NOT RECOMMENDED, as it is less secure. The JWK x5c parameter MAY be used to provide X.509 representations of keys provided. When used, the bare key values MUST still be present and MUST match those in the certificate. '
        registration_client_uri:
          type: string
          minLength: 1
        userinfo_encrypted_response_alg:
          type: string
          minLength: 1
        userinfo_encrypted_response_enc:
          type: string
          minLength: 1
        token_endpoint_auth_method:
          type: string
          minLength: 1
          description: 'Requested Client Authentication method for the Token Endpoint. The options are client_secret_post, client_secret_basic, client_secret_jwt, private_key_jwt, and none, as described in Section 9 of OpenID Connect Core 1.0 [OpenID.Core]. Other authentication methods MAY be defined by extensions. If omitted, the default is client_secret_basic -- the HTTP Basic Authentication Scheme specified in Section 2.3.1 of OAuth 2.0 [RFC6749]'
        scope:
          type: array
          description: 'String or Array that containing a space-separated list of scope values (as described in Section 3.3 of OAuth 2.0 RFC6749) that the client can use when requesting access tokens. The semantics of values in this list are service specific. If omitted, an authorization server MAY register a client with a default set of scopes.'
          items:
            type: string
        domain:
          type: array
          description: 'List of regular expressions separated by a blank space, where each expression is a security restriction, it can be based on the DNS or application domain by its name or on the ip address.'
          items:
            type: string
        contacts:
          type: array
          description: 'Array of strings representing ways to contact people responsible for this client, typically email addresses.  The authorization server MAY make these contact addresses available to end-users for support requests for the client.  '
          items:
            type: string
        redirect_uris:
          type: array
          description: 'Array of Redirection URI values used by the Client. One of these registered Redirection URI values MUST exactly match the redirect_uri parameter value used in each Authorization Request, with the matching performed as described in Section 6.2.1 of [RFC3986] (Simple String Comparison). '
          items:
            type: string
        grant_types:
          type: array
          items:
            type: string
      x-tags:
        - Segurity
      title: ''
    PaymentCard:
      description: ''
      type: object
      x-examples:
        Example with client data:
          id: 91a50330-01e2-11ec-b91b-df6f3b86a033
          reference: my-reference
          concept: Bicycle
          description: Two wheels
          amount: 100000
          currency: EUR
          singleUse: true
          favorite: true
          reasonId: 4
          reasonDes: null
          expirationDays: 0
          userId: b168e810-e0bb-11ea-8b91-bd37f597fb67
          lang: es
          state: 1
          urlSuccess: 'https://my-business.com/payment-ok'
          urlFailed: 'https://my-business.com/payment-ko'
          urlNotification: 'https://my-business.com/payment-callback'
          expirationDate: null
          serviceDate: null
          hasClient: true
          updatedAt: '2021-08-20T18:15:16.397Z'
          createdAt: '2021-08-20T18:15:15.941Z'
          qrImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAADkCAYAAACIV4iNAAAAAklEQVR4AewaftIAAA88SURBVO3B0Wltyw5FweHGOQkUywxPsQgUlZ8/9dXQrLV9+x1U9fXzizHGFRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMa3zzkJv5SVtC5iS4r6NzETlbQuYmdrOCEm9jJCk64iZ2soHMTO1lB5ya6rKBzE11W0LmJLivo3MROVnDCTXRZQecm/lJW8MRijHGNxRjjGosxxjW+eVlW8CY3ccJN7GQFnZt4wk3sZAWdmzjhJk64iZ2soHMTO26iywo6N7HjJnaygs5NfFJW8CY38abFGOMaizHGNRZjjGt882Fu4kRW8ERW0LmJnaxgx010bqLLCjo38V/KCjo30bmJnazgRFZwwk3sZAU7buJNbuJEVvBJizHGNRZjjGssxhjX+Ob/XFbQuYkuK+jcRJcV7GQFnZvo3MSOm+iygh030WUFnZvYcRM7WUHnJnbcxBNZwY6b2MkKdrKCf8lijHGNxRjjGosxxjW++ce5iS4r+KSsoHMTnZvosoIdN/EmN7HjJrqsoHMTXVbQuYkTWUHnJnaygn/ZYoxxjcUY4xqLMcY1vvmwrOCT3ESXFey4iS4r6NxElxV0WUHnJjo3sZMVPJEVnHATXVbQuYkuKzjhJnbcxI6b2HETXVbwpqzgJosxxjUWY4xrLMYY1/jmZW7iJm6iywo6N9FlBZ2b6LKCnaygcxM7bqLLCjo3seMmuqzgTW6iywo6N9FlBZ2b6LKCzk10WUHnJnbcRJcV7LiJmy3GGNdYjDGusRhjXOPr5xf/x9zEE1nB+jcxImsoHMTXVaw4ya6rKBzE11WcMJN7GQFnZs4kRX8lxZjjGssxhjXWIwxrvHNy9xElxV0bqLLCnbcxE5WcMJNdFlBlxWccBNdVtBlBZ2b6LKCLit4U1bQuYkdN9FlBTtuossKdrKCzk3sZAU7WUHnJrqsoHMTXVbQuYkTWcGbFmOMayzGGNdYjDGu8c1DbuJEVrCTFTyRFTzhJrqsYCcr6NzETlbQuYkuK+jcxAk30WUFb3ITO26iywo6N7GTFexkBZ2b6LKCzk28KSv4pMUY4xqLMcY1FmOMa3z9/OI/5Ca6rKBzE11W0LmJLivYcgcxM7buKTFmOMayzGGNdYjDGu8c2HZQWflBU8kRV0bqLLCrqs4ISb6LKCE1lB5ya6rKBzE11WcCIr6NxElxU8kRW8yU10WUHnJjo30WUFXVawkxV0buJNizHGNRZjjGssxhjX+Pr5xQNu4i9lBTtuYicr6NzEiaygcxNdVrDjJnaygs5NnMgKOjexkxV0buJEVnDCTbwpK+jcRJcV7LiJN2UFTyzGGNdYjDGusRhjXOPr5xdjjCssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNf4HR2jSxBc4+N4AAAAASUVORK5CYII='
          shortUrl: 'https://www.tropipay.com/money-request/91a50330-01e2-11ec-b91b-df6f3b86a033'
          paymentUrl: 'http://localhost:3000/trust_payment/eyJmb3JtVXJsIjoiaHR0cHM6Ly9wYXltZW50cy5zZWN1cmV0cmFkaW5nLm5ldC9wcm9jZXNzL3BheW1lbnRzL2Nob2ljZSIsInNpdGVyZWZlcmVuY2UiOiJ0aXRhbmVzdGVsZWNvbTg3OTQyIiwic3Rwcm9maWxlIjoiZGVmYXVsdCIsInZlcnNpb24iOjIsImN1cnJlbmN5aXNvM2EiOiJFVVIiLCJtYWluYW1vdW50IjoxMDAwLCJsb2NhbGUilc3RhdHVzIiwibG9jYWxlIiwibWFpbmFtb3VudCIsIm1kIiwibWVyY2hhbnRjYXRlZ29yeWNvZGUiLCJwYW4iLCJwYXJlbnR0cmFuc2FjdGlvbnJlZmVyZW5jZSIsInRyYW5zYWN0aW9ucmVmZXJlbmNlIiwic3RhdHVzIiwicGFyZXEiLCJwYXlwYWxlbWFpbCIsInBhcmVzIiwic3Rwcm9maWxlIiwic3VibWVyY2hhbnRpZCIsInJlcXVlc3R0eXBlZGVzY3JpcHRpb24iLCJhY3F1aXJlcnJlc3BvbnNlIiwiZW5yb2xsZWQiLCJzdGF0dXMiLCJlY2kiLCJ0aHJlZWR2ZXJzaW9uIiwiY2F2diIsInNlY3VyaXR5cmVzcG9uc2VzZWN1cml0eWNvZGUiLCJjaGFyZ2VkZXNjcmlwdGlvbiIsImN1c3RvbWVyaXAiXX0='
          value:
            id: 91a50330-01e2-11ec-b91b-df6f3b86a033
            reference: my-reference
            concept: Bicycle
            description: Two wheels
            amount: 100000
            currency: EUR
            singleUse: true
            favorite: true
            reasonId: 4
            reasonDes: null
            expirationDays: 0
            userId: b168e810-e0bb-11ea-8b91-bd37f597fb67
            lang: es
            state: 1
            urlSuccess: 'https://my-business.com/payment-ok'
            urlFailed: 'https://my-business.com/payment-ko'
            urlNotification: 'https://my-business.com/payment-callback'
            expirationDate: null
            serviceDate: null
            hasClient: true
            updatedAt: '2021-08-20T18:15:16.397Z'
            createdAt: '2021-08-20T18:15:15.941Z'
            qrImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAADkCAYAAACIV4iNAAAAAklEQVR4AewaftIAAA88SURBVO3B0Wltyw5FweHGOQkUywxPsQgUlZ8/9dXQrLV9+x1U9fXzizHGFRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMa3zzkJv5SVtC5iS4r6NzETlbQuYmdrOCEm9jJCk64iZ2soHMTO1lB5ya6rKBzE11W0LmJLivo3MROVnDCTXRZQecm/lJW8MRijHGNxRjjGosxxjW+eVlW8CY3ccJN7GQFnZt4wk3sZAWdmzjhJk64iZ2soHMTO26iywo6N7HjJnaygs5NfFJW8CY38abFGOMaizHGNRZjjGt882Fu4kRW8ERW0LmJnaxgx010bqLLCjo38V/KCjo30bmJnazgRFZwwk3sZAU7buJNbuJEVvBJizHGNRZjjGssxhjX+Ob/XFbQuYkuK+jcRJcV7GQFnZvo3MSOm+iygh030WUFnZvYcRM7WUHnJnbcxBNZwY6b2MkKdrKCf8lijHGNxRjjGosxxjW++ce5iS4r+KSsoHMTnZvosoIdN/EmN7HjJrqsoHMTXVbQuYkTWUHnJnaygn/ZYoxxjcUY4xqLMcY1vvmwrOCT3ESXFey4iS4r6NxElxV0WUHnJjo3sZMVPJEVnHATXVbQuYkuKzjhJnbcxI6b2HETXVbwpqzgJosxxjUWY4xrLMYY1/jmZW7iJm6iywo6N9FlBZ2b6LKCnaygcxM7bqLLCjo3seMmuqzgTW6iywo6N9FlBZ2b6LKCzk10WUHnJnbcRJcV7LiJmy3GGNdYjDGusRhjXOPr5xf/x9zEE126iywo6N7GTFexGDHTexkBZ2b2HETO1nBCTexkxV0bqLLCt60GGNcYzHGuMZijHGNbx7KCjo38SY30WUFT2QFO26iywo6N9FlBSfcRJcVdG7ihJvosoIn3MSOm9jJCWUFXVawkxV0buJNizHGNRZjjGssxhjX+Pr5xQNu4i9lBTtuYicr6NzEiaygcxNdVrDjJnaygs5NnMgKOjexkxV0buJEVnDCTbwpK+jcRJcV7LiJN2UFTyzGGNdYjDGusRhjXOPr5xdjjCssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNf4HR2jSxBc4+N4AAAAASUVORK5CYII='
            shortUrl: 'https://www.tropipay.com/money-request/91a50540-01e2-11ec-b91b-df6f3b8bca33'
            paymentUrl: 'http://localhost:3000/trust_payment/eyJmb3JtVXJsIjoiaHR0cHM6Ly9wYXltZW50cy5zZWN1cmV0cmFkaW5nLm5ldC9wcm9jZXNzL3BheW1lbnRzL2Nob2ljZSIsInNpdGVyZWZlcmVuY2UiOiJ0aXRhbmVzdGVsZWNvbTg3OTQyIiwic3Rwcm9maWxlIjoiZGVmYXVsdCIsInZlcnNpb24iOjIsImN1cnJlbmN5aXNvM2EiOiJFVVIiLCJtYWluYW1vdW50IjoxMDAwLCJsb2NhbGUiOiJlc19FUyIsIm9yZGVycmVmZXJlbmNlIjoiMDIyMzM4MDA4MzU3Iiwib3BlcmF0b3JuYW1lIjoiVFBQIiwic3RkZWZhdWx0cHJvZmlsZSI6InN0X2NhcmRvbmx5IiwiYWxsdXJsbm90aWZpY2F0aW9uIjoiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jYWxsYmFjay90cnVzdHBheW1lbnRzIiwic3VjY2Vzc2Z1bHVybHJlZGlyZWN0IjoiaHR0cHM6Ly9teS1idXNpbmVzcy5jb20vcGF5bWVudC1vayIsImRlY2xpbmVkdXJscmVkaXJwicGFyZXEiLCJwYXlwYWxlbWFpbCIsInBhcmVzIiwic3Rwcm9maWxlIiwic3VibWVyY2hhbnRpZCIsInJlcXVlc3R0eXBlZGVzY3JpcHRpb24iLCJhY3F1aXJlcnJlc3BvbnNlIiwiZW5yb2xsZWQiLCJzdGF0dXMiLCJlY2kiLCJ0aHJlZWR2ZXJzaW9uIiwiY2F2diIsInNlY3VyaXR5cmVzcG9uc2VzZWN1cml0eWNvZGUiLCJjaGFyZ2VkZXNjcmlwdGlvbiIsImN1c3RvbWVyaXAiXX0='
        Example without client data:
          value:
            id: 91a50330-01e2-11ec-b91b-df6f3b86a033
            reference: my-reference
            concept: Bicycle
            description: Two wheels
            amount: 100000
            currency: EUR
            singleUse: true
            favorite: true
            reasonId: 4
            reasonDes: null
            expirationDays: 0
            userId: b168e810-e0bb-11ea-8b91-bd37f597fb67
            lang: es
            state: 1
            urlSuccess: 'https://my-business.com/payment-ok'
            urlFailed: 'https://my-business.com/payment-ko'
            urlNotification: 'https://my-business.com/payment-callback'
            expirationDate: null
            serviceDate: null
            hasClient: false
            updatedAt: '2021-08-20T18:15:16.397Z'
            createdAt: '2021-08-20T18:15:15.941Z'
            qrImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAADkCAYAAACIV4iNAAAAAklEQVR4AewaftIAAA88SURBVO3B0Wltyw5FweHGOQkUywxPsQgUlZ8/9dXQrLV9+x1U9fXzizHGFRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMa3zzkJv5SVtC5iS4r6NzETlbQuYmdrOCEm9jJCk64iZ2soHMTO1lB5ya6rKBzE11W0LmJLivo3MROVnDCTXRZQecm/lJW8MRijHGNxRjjGosxxjW+eVlW8CY3ccJN7GQFnZt4wk3sZAWdmzjhJk64iZ2soHMTO26iywo6N7HjJnaygs5NfFJW8CY38abFGOMaizHGNRZjjGt882Fu4kRW8ERW0LmJnaxgx010bqLLCjo38V/KCjo30bmJnazgRFZwwk3sZAU7buJNbuJEVvBJizHGNRZjjGssxhjX+Ob/XF2bOJEV/JcWY4xrLMYY11iMMa7x9fOLB9zEiazghJvYyQp23MROVrDjJrqsoHMTT2QFnZvosoLOTexkBTtu4kRW0LmJnaygcxN/KSvo3MROVrDjJrqsoHMTXVbwxGKMcY3FGOMaizHGNb55KCs44Sa6rKBzE11WsOMmuqxgJyvo3MROVvBEVtC5iZ2s4JOygh03sZMV7LiJLivo3ESXFbzJTexkBW/KCt60GGNcYzHGuMZijHGNr59fPOAmuqzghJv4pKygcxMnsoIdN9FlBSfcRJcVdG7iJllB5yZOZAWdm+iygs5NdFlB5ybelBV0buJEVvDEYoxxjcUY4k10WUHnJrqsYCcreNNijHGNxRjjGosxxjW+fn7xgJs4kRV0buJNWUHnJnaygs5NdFlB5ya6rKBzE11W8ISb6LKCzk10WUHnJnaygs5N7GQFJ9xElxV0buK/lBXsuIkTWcETizHGNRZjjGssxhjX+OahrKBzEztuYicr2HETXVZwIit4k5v4S26iywo6N3HCTexkBTtuossKuqxgJyvo3MROVtC5iS4r2HETnZvYyQo6N/FJizHGNRZjjGssxhjX+OYhN9FlBTtu4oSb2HETJ9xElxWcyAp23ETnJrqs4Ims4C+5iZ2soHMTb8oKOjdxwk084Sa6rKBzE29ajDGusRhjXGMxxrjG188vHnATJMayzGGNdYjDGu8c2HZQWflBU8kRV0bqLLCrqs4ISb6LKCE1lB5ya6rKBzE11WcCIr6NxElxU8kRW8yU10WUHnJjo30WUFXVawkxV0buJNizHGNRZjjGssxhjX+Pr5xQNu4i9lBTtuYicr6NzEiaygcxNdVrDjJnaygs5NnMgKOjexkxV0buJEVnDCTbwpK+jcRJcV7LiJN2UFTyzGGNdYjDGusRhjXOPr5xdjjCssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNf4HR2jSxBc4+N4AAAAASUVORK5CYII='
            shortUrl: 'https://www.tropipay.com/money-request/91a50330-01e2-11ec-b91b-df6f3b86a033'
            paymentUrl: ''
      properties:
        id:
          type: string
          minLength: 1
        reference:
          type: string
          minLength: 1
        concept:
          type: string
          minLength: 1
        description:
          type: string
          minLength: 1
        amount:
          type: number
        currency:
          type: string
          minLength: 1
        singleUse:
          type: boolean
        favorite:
          type: boolean
        reasonId:
          type: number
        reasonDes:
          type: string
        expirationDays:
          type: number
        userId:
          type: string
          minLength: 1
        lang:
          type: string
          minLength: 1
        state:
          type: number
        urlSuccess:
          type: string
          minLength: 1
        urlFailed:
          type: string
          minLength: 1
        urlNotification:
          type: string
          minLength: 1
        expirationDate:
          type: string
        serviceDate:
          type: string
        hasClient:
          type: boolean
        updatedAt:
          type: string
          minLength: 1
        createdAt:
          type: string
          minLength: 1
        qrImage:
          type: string
          minLength: 1
        shortUrl:
          type: string
          minLength: 1
        paymentUrl:
          type: string
          minLength: 1
      required:
        - id
        - reference
        - concept
        - description
        - amount
        - currency
        - singleUse
        - favorite
        - reasonId
        - reasonDes
        - expirationDays
        - userId
        - lang
        - state
        - urlSuccess
        - urlFailed
        - urlNotification
        - hasClient
        - updatedAt
        - createdAt
        - qrImage
        - shortUrl
        - paymentUrl
      x-internal: true
  securitySchemes: {}
  parameters:
    User-Authorization-Token:
      name: Authorization
      in: header
      required: true
      schema:
        type: string
      description: 'Bearer {user-token}'
    Merchant-Authorization-Token:
      name: Authorization
      in: header
      required: true
      schema:
        type: string
      description: 'Bearer {merchant-token}'
  responses:
    depositAccount:
      description: This is the entire DepositAccount object stored
      content:
        application/json:
          schema:
            description: ''
            type: object
            properties:
              id:
                type: number
              accountNumber:
                type: string
                minLength: 1
              alias:
                type: string
                minLength: 1
              swift:
                type: string
                minLength: 1
              type:
                type: number
              country: {}
              firstName:
                type: string
                minLength: 1
              default: {}
              state:
                type: number
              userId:
                type: string
                minLength: 1
              countryDestinationId:
                type: number
              lastName:
                type: string
                minLength: 1
              documentNumber:
                type: string
                minLength: 1
              userRelationTypeId:
                type: number
              city:
                type: string
                minLength: 1
              postalCode:
                type: number
              address:
                type: string
                minLength: 1
              phone:
                type: string
                minLength: 1
              checked:
                type: boolean
              province:
                type: string
                minLength: 1
              beneficiaryType:
                type: number
              relatedUserId: {}
              currency:
                type: string
                minLength: 1
              correspondent: {}
              location: {}
              office: {}
              officeValue: {}
              paymentType:
                type: number
              paymentEntityBeneficiaryId:
                type: number
              paymentEntityAccountId:
                type: number
              verified: {}
              documentTypeId: {}
              documentExpirationDate: {}
              createdAt:
                type: string
                minLength: 1
              updatedAt:
                type: string
                minLength: 1
            required:
              - id
              - accountNumber
              - alias
              - type
              - state
              - userId
              - countryDestinationId
              - lastName
              - documentNumber
              - userRelationTypeId
              - city
              - postalCode
              - address
              - phone
              - checked
              - province
              - beneficiaryType
              - currency
              - paymentType
              - paymentEntityBeneficiaryId
              - paymentEntityAccountId
              - createdAt
              - updatedAt
          examples:
            Example:
              value:
                id: 45461
                accountNumber: 9111 1234 5678 9012
                alias: Joe Account
                swift: BSOBUSHHXXX
                type: 3
                country: null
                firstName: John
                default: null
                state: 1
                userId: b168e810-e0bb-11ea-8b91-bc41f597fbe4
                countryDestinationId: 1
                lastName: Doe
                documentNumber: '831108111111'
                userRelationTypeId: 4
                city: Barcelona
                postalCode: 11300
                address: '110, Some Street'
                phone: '+3412341245'
                checked: true
                province: Cataluña
                beneficiaryType: 2
                relatedUserId: null
                currency: USD
                correspondent: null
                location: null
                office: null
                officeValue: null
                paymentType: 2
                paymentEntityBeneficiaryId: 11111
                paymentEntityAccountId: 22222
                verified: null
                documentTypeId: null
                documentExpirationDate: null
                createdAt: '2020-11-27T02:43:47.108Z'
                updatedAt: '2021-02-11T22:41:32.518Z'
    eventList:
      description: Example response
      content:
        application/json:
          schema:
            type: array
            items:
              type: object
              properties:
                event:
                  type: string
                target:
                  type: string
                value:
                  type: string
                createdAt:
                  type: string
                updatedAt:
                  type: string
          examples:
            example-1:
              value:
                - event: string
                  target: string
                  value: string
                  createdAt: string
                  updatedAt: string
    kycResponse:
      description: The response of KYC endpoint
      content:
        application/json:
          schema:
            type: object
            properties:
              status:
                type: string
              url:
                type: string
          examples:
            example-1:
              value:
                url: 'http://localhost:3000/widget/kyc/eyJtZXJjaGFudElkIjoxLCJ1c2VySWQiOiJmZTI4YTlmMC04NWZkLTExZWItOWExYi05NTEyZWFhNGI4MGUiLCJzaWduYXR1cmUiOiJjNzQ3YzQ0YmJhMDhjMTM5OWEyZTFhZDc1YTgxYTJjMSIsImNvZGUiOjE2MTkwMzY4NjMyMjN9'
    MerchantSetting:
      description: A single Merchant Setting
      content:
        application/json:
          schema:
            type: object
            properties:
              key:
                type: string
              value:
                type: string
              section:
                type: string
              state:
                type: string
              createdAt:
                type: string
              updatedAt:
                type: string
    MerchantSettingList:
      description: 'Here we have an example of a valid response: '
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/MerchantSetting'
          examples:
            example-1:
              value:
                - key: publicPrice
                  value: '2.5'
                  section: public
                  state: '1'
                  createdAt: '2021-03-18T20:10:37.670Z'
                  updatedAt: '2021-03-18T20:10:37.670Z'
                - key: merchantPrice
                  value: '2.10'
                  section: public
                  state: '1'
                  createdAt: '2021-03-18T04:00:00.000Z'
                  updatedAt: '2021-03-18T04:00:00.000Z'
    eventListDescription:
      description: A list of events
      content:
        application/json:
          schema:
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
    ErrorResponse:
      description: |-
        Basic Error response estructure

        In case of error in the token encoding you will receive an internal error with a structure as shown in example *'Example 1: Bad token encoding'*.
         
        In case of an error in the token keys or attempted security breach with the correct encoding, you will receive an internal error with a structure as shown in example *'Example 2: Bad token keys'*.
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
          examples:
            'Example 1: Bad token encoding':
              value:
                error:
                  code: 'InvalidCharacterError: Invalid character: the string to be decoded is not correctly encoded.'
                  message: Failed to authenticate token for Merchant!
            'Example 2: Bad token keys':
              value:
                error:
                  code: 'OperationError: Failed to validate merchant token!'
                  message: Failed to authenticate token for Merchant!
    EventResponse:
      description: Example response
      content:
        application/json:
          schema:
            description: ''
            type: object
            properties:
              action:
                type: string
                minLength: 1
              status:
                type: string
                minLength: 1
              details:
                type: string
                minLength: 1
            required:
              - action
              - status
              - details
          examples:
            example-1:
              value:
                action: update
                status: success
                details: user_signup
    SecurityCodeSent:
      description: a JSON response that confirms code was sent to customer
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
              response:
                type: string
          examples:
            example:
              value:
                message: Security Code Sent
                response: OK
    Movement:
      description: All the movement data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Movement'
        application/xml:
          schema:
            $ref: '#/components/schemas/Movement'
    MovementList:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              count:
                type: number
                description: The total number of movements
              rows:
                type: array
                items:
                  $ref: '#/components/schemas/Movement'
              limit:
                type: number
                description: The max number of objects to fetch
              offset:
                type: number
                description: An offset number to start fetching from. Defaults to 0
            required:
              - count
              - rows
              - limit
              - offset
    FailedAuthenticateResponse:
      description: 'Error when no token is provided or supplied token is wrong and authentication is required. '
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
          examples:
            Supplied token is wrong:
              value:
                error:
                  msg: Failed to authenticate token!
            No token is provided:
              value:
                error:
                  msg: No token!
    OauthBadRequestResponse:
      description: |
        There are two different kinds of errors to handle. The first kind of error is when the developer did something wrong when creating the authorization request. The other kind of error is when the user rejects the request (clicks the “Deny” button).

        If there is something wrong with the syntax of the request, such as the *redirect_uri* or *client_id is invalid*, then it’s important not to redirect the user and instead you should show the error message directly. This is to avoid letting your authorization server be used as an open redirector.

        If the *redirect_uri* and client_id are both valid, but there is still some other problem, it’s okay to redirect the user back to the redirect URI with the error in the query string.

        When redirecting back to the application to indicate an error, the server adds the following parameters to the redirect URL: error a single ASCII error code from the following list:

        - **invalid_request:** the request is missing a parameter, contains an invalid parameter, includes a parameter more than once, or is otherwise invalid.
        - **access_denied:** the user or authorization server denied the request
        - **unauthorized_client:** the client is not allowed to request an authorization code using this method, for example if a confidential client attempts to use the implicit grant type.
        - **unsupported_response_type:** the server does not support obtaining an authorization code using this method, for example if the authorization server never implemented the implicit grant type.
        - **invalid_scope:** the requested scope is invalid or unknown.
        - **server_error:** instead of displaying a 500 Internal Server Error page to the user, the server can redirect with this error code.
        - **temporarily_unavailable:** if the server is undergoing maintenance, or is otherwise unavailable, this error code can be returned instead of responding with a 503 Service Unavailable status code.

        **error_description**
        The authorization server can optionally include a human-readable description of the error. This parameter is intended for the developer to understand the error, and is not meant to be displayed to the end user. The valid characters for this parameter are the ASCII character set except for the double quote and backslash, specifically, hex codes 20-21, 23-5B and 5D-7E.

        **error_uri**
        The server can also return a URL to a human-readable web page with information about the error. This is intended for the developer to get more information about the error, and is not meant to be displayed to the end user.
      content:
        application/json:
          schema:
            description: ''
            type: object
            properties:
              error:
                type: string
                minLength: 1
              error_description:
                type: string
                minLength: 1
              error_uri:
                type: string
                minLength: 1
            required:
              - error
              - error_description
              - error_uri
            x-examples:
              example-1:
                error: invalid_client
                error_description: Credential not found
                error_uri: 'See the full API docs at https://authorization-server.com/docs/access_token'
          examples:
            Name must be Unique:
              value:
                error: invalid_request
                error_description: Name must be Unique
            Invalid Client:
              value:
                error: invalid_client
                error_description: Credential not found
                error_uri: 'See the full API docs at https://authorization-server.com/docs/access_token'
    paymentCard:
      description: PaymentCard data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PaymentCard'
          examples:
            Example with client data:
              value:
                id: 91a50330-01e2-11ec-b91b-df6f3b86a033
                reference: my-reference
                concept: Bicycle
                description: Two wheels
                amount: 100000
                currency: EUR
                singleUse: true
                favorite: true
                reasonId: 4
                reasonDes: null
                expirationDays: 0
                userId: b168e810-e0bb-11ea-8b91-bd37f597fb67
                lang: es
                state: 1
                urlSuccess: 'https://my-business.com/payment-ok'
                urlFailed: 'https://my-business.com/payment-ko'
                urlNotification: 'https://my-business.com/payment-callback'
                expirationDate: null
                serviceDate: null
                hasClient: true
                updatedAt: '2021-08-20T18:15:16.397Z'
                createdAt: '2021-08-20T18:15:15.941Z'
                qrImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAADkCAYAAACIV4iNAAAAAklEQVR4AewaftIAAA88SURBVO3B0Wltyw5FweHGOQkUywxPsQgUlZ8/9dXQrLV9+x1U9fXzizHGFRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMa3zzkJv5SVtC5iS4r6NzETlbQuYmdrOCEm9jJCk64iZ2soHMTO1lB5ya6rKBzE11W0LmJLivo3MROVnDCTXRZQecm/lJW8MRijHGNxRjjGosxxjW+eVlW8CY3ccJN7GQFnZt4wk3sZAWdmzjhJk64iZ2soHMTO26iywo6N7HjJnaygs5NfFJW8CY38abFGOMaizHGNRZjjGt882Fu4kRW8ERW0LmJnaxgx010bqLLCjo38V/KCjo30bmJnazgRFZwwk3sZAU7buJNbuJEVvBJizHGNRZjjGssxhjX+Ob/XFbQuYkuK+jcRJcV7GQFnZvo3MSOm+iygh030WUFnZvYcRM7WUHnJnbcxBNZwY6b2MkKdrKCf8lijHGNxRjjGosxxjW++ce5iS4r+KSsoHMTnZvosoIdN/EmN7HjJrqsoHMTXVbQuYkTWUHnJnaygn/ZYoxxjcUY4xqLMcY1vvmwrOCT3ESXFey4iS4r6NxElxV0WUHnJjo3sZMVPJEVnHATXVbQuYkuKzjhJnbcxI6b2HETXVbwpqzgJosxxjUWY4xrLMYY1/jmZW7iJm6iywo6N9FlBZ2b6LKCnaygcxM7bqLLCjo3seMmuqzgTW6iywo6N9FlBZ2b6LKCzk10WUHnJnbcRJcV7LiJmy3GGNdYjDGusRhjXOPr5xf/x9zEE126iywo6N7GTFexGDHTexkBZ2b2HETO1nBCTexkxV0bqLLCt60GGNcYzHGuMZijHGNbx7KCjo38SY30WUFT2QFO26iywo6N9FlBSfcRJcVdG7ihJvosoIn3MSOm9jJCWUFXVawkxV0buJNizHGNRZjjGssxhjX+Pr5xQNu4i9lBTtuYicr6NzEiaygcxNdVrDjJnaygs5NnMgKOjexkxV0buJEVnDCTbwpK+jcRJcV7LiJN2UFTyzGGNdYjDGusRhjXOPr5xdjjCssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNf4HR2jSxBc4+N4AAAAASUVORK5CYII='
                shortUrl: 'https://www.tropipay.com/money-request/91a50540-01e2-11ec-b91b-df6f3b8bca33'
                paymentUrl: 'http://localhost:3000/trust_payment/eyJmb3JtVXJsIjoiaHR0cHM6Ly9wYXltZW50cy5zZWN1cmV0cmFkaW5nLm5ldC9wcm9jZXNzL3BheW1lbnRzL2Nob2ljZSIsInNpdGVyZWZlcmVuY2UiOiJ0aXRhbmVzdGVsZWNvbTg3OTQyIiwic3Rwcm9maWxlIjoiZGVmYXVsdCIsInZlcnNpb24iOjIsImN1cnJlbmN5aXNvM2EiOiJFVVIiLCJtYWluYW1vdW50IjoxMDAwLCJsb2NhbGUiOiJlc19FUyIsIm9yZGVycmVmZXJlbmNlIjoiMDIyMzM4MDA4MzU3Iiwib3BlcmF0b3JuYW1lIjoiVFBQIiwic3RkZWZhdWx0cHJvZmlsZSI6InN0X2NhcmRvbmx5IiwiYWxsdXJsbm90aWZpY2F0aW9uIjoiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jYWxsYmFjay90cnVzdHBheW1lbnRzIiwic3VjY2Vzc2Z1bHVybHJlZGlyZWN0IjoiaHR0cHM6Ly9teS1idXNpbmVzcy5jb20vcGF5bWVudC1vayIsImRlY2xpbmVkdXJscmVkaXJwicGFyZXEiLCJwYXlwYWxlbWFpbCIsInBhcmVzIiwic3Rwcm9maWxlIiwic3VibWVyY2hhbnRpZCIsInJlcXVlc3R0eXBlZGVzY3JpcHRpb24iLCJhY3F1aXJlcnJlc3BvbnNlIiwiZW5yb2xsZWQiLCJzdGF0dXMiLCJlY2kiLCJ0aHJlZWR2ZXJzaW9uIiwiY2F2diIsInNlY3VyaXR5cmVzcG9uc2VzZWN1cml0eWNvZGUiLCJjaGFyZ2VkZXNjcmlwdGlvbiIsImN1c3RvbWVyaXAiXX0='
            Example without client data:
              value:
                id: 91a50330-01e2-11ec-b91b-df6f3b86a033
                reference: my-reference
                concept: Bicycle
                description: Two wheels
                amount: 100000
                currency: EUR
                singleUse: true
                favorite: true
                reasonId: 4
                reasonDes: null
                expirationDays: 0
                userId: b168e810-e0bb-11ea-8b91-bd37f597fb67
                lang: es
                state: 1
                urlSuccess: 'https://my-business.com/payment-ok'
                urlFailed: 'https://my-business.com/payment-ko'
                urlNotification: 'https://my-business.com/payment-callback'
                expirationDate: null
                serviceDate: null
                hasClient: false
                updatedAt: '2021-08-20T18:15:16.397Z'
                createdAt: '2021-08-20T18:15:15.941Z'
                qrImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAADkCAYAAACIV4iNAAAAAklEQVR4AewaftIAAA88SURBVO3B0Wltyw5FweHGOQkUywxPsQgUlZ8/9dXQrLV9+x1U9fXzizHGFRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMa3zzkJv5SVtC5iS4r6NzETlbQuYmdrOCEm9jJCk64iZ2soHMTO1lB5ya6rKBzE11W0LmJLivo3MROVnDCTXRZQecm/lJW8MRijHGNxRjjGosxxjW+eVlW8CY3ccJN7GQFnZt4wk3sZAWdmzjhJk64iZ2soHMTO26iywo6N7HjJnaygs5NfFJW8CY38abFGOMaizHGNRZjjGt882Fu4kRW8ERW0LmJnaxgx010bqLLCjo38V/KCjo30bmJnazgRFZwwk3sZAU7buJNbuJEVvBJizHGNRZjjGssxhjX+Ob/XF2bOJEV/JcWY4xrLMYY11iMMa7x9fOLB9zEiazghJvYyQp23MROVrDjJrqsoHMTT2QFnZvosoLOTexkBTtu4kRW0LmJnaygcxN/KSvo3MROVrDjJrqsoHMTXVbwxGKMcY3FGOMaizHGNb55KCs44Sa6rKBzE11WsOMmuqxgJyvo3MROVvBEVtC5iZ2s4JOygh03sZMV7LiJLivo3ESXFbzJTexkBW/KCt60GGNcYzHGuMZijHGNr59fPOAmuqzghJv4pKygcxMnsoIdN9FlBSfcRJcVdG7iJllB5yZOZAWdm+iygs5NdFlB5ybelBV0buJEVvDEYoxxjcUY4k10WUHnJrqsYCcreNNijHGNxRjjGosxxjW+fn7xgJs4kRV0buJNWUHnJnaygs5NdFlB5ya6rKBzE11W8ISb6LKCzk10WUHnJnaygs5N7GQFJ9xElxV0buK/lBXsuIkTWcETizHGNRZjjGssxhjX+OahrKBzEztuYicr2HETXVZwIit4k5v4S26iywo6N3HCTexkBTtuossKuqxgJyvo3MROVtC5iS4r2HETnZvYyQo6N/FJizHGNRZjjGssxhjX+OYhN9FlBTtu4oSb2HETJ9xElxWcyAp23ETnJrqs4Ims4C+5iZ2soHMTb8oKOjdxwk084Sa6rKBzE29ajDGusRhjXGMxxrjG188vHnATJMayzGGNdYjDGu8c2HZQWflBU8kRV0bqLLCrqs4ISb6LKCE1lB5ya6rKBzE11WcCIr6NxElxU8kRW8yU10WUHnJjo30WUFXVawkxV0buJNizHGNRZjjGssxhjX+Pr5xQNu4i9lBTtuYicr6NzEiaygcxNdVrDjJnaygs5NnMgKOjexkxV0buJEVnDCTbwpK+jcRJcV7LiJN2UFTyzGGNdYjDGusRhjXOPr5xdjjCssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNRZjjGssxhjXWIwxrrEYY1xjMca4xmKMcY3FGOMaizHGNf4HR2jSxBc4+N4AAAAASUVORK5CYII='
                shortUrl: 'https://www.tropipay.com/money-request/91a50330-01e2-11ec-b91b-df6f3b86a033'
                paymentUrl: ''
    paymentCardList:
      description: A list of Payment Cards (Paylinks)
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/PaymentCard'
